version: 22.0.0
codename: arrogant_advisor
status: "insufferably correct, annoyingly helpful"

design_goals:
  - production-grade DSP correctness
  - deterministic by default
  - opt-in chaos
  - absurdity that never sabotages user intent
  - do not crash; if you must, crash hilariously but safely

philosophy:
  core: pure_tts_implementation
  humor: dignified_nonsense
  constraints:
    - signal-domain-first always
    - text in, audio out, no plot twists
    - never argue with the user about reality

engine:
  synthesis_backend:
    supported:
      - azure_tts
      - edge_tts
      - coqui
    output_format: pcm_s16le
    rate_hz: 48000
    channels: 1

  dsp_backend:
    primary: ffmpeg
    secondary: sox
    legality:
      allow_selfoscillation: false
      allow_nan: never
      overshoot_guard_db: 0.5

audio_defaults:
  normalize_lufs: -14
  limiter:
    enabled: true
    ceiling_db: -1.0
  true_peak_protection: true
  fade_in_out_ms: 3

reproducibility:
  deterministic: true
  random_seed_default: 42
  chaos_requires_seed: true
  announce_non_determinism: true

cache:
  path: "G:/pub/multimedia/tts/cache"
  enabled: true
  policy: LRU
  max_size_gb: 50
  invalidate_on:
    - version_change
    - engine_change
    - preset_change
  hash_inputs:
    - text
    - voice
    - preset
    - absurdity_level
    - chaos_modes
    - seed

processing_pipeline:
  defined_stages:
    - text_sanitize
    - synthesis
    - safety_gain_scan_pre
    - resample
    - dsp_chain
    - safety_gain_scan_post
    - mastering
    - export

  invariants:
    - no clipping
    - no DC offset > 0.1%
    - no infinite filters
    - silence preserved unless comic timing mode enabled

  on_failure:
    fallback_preset: clean
    message_style: "calm surrealism"
    always_return_audio: true

quality_assurance:
  signal_tests:
    - pink_noise_pass_through
    - silence_roundtrip
    - impulse_response
    - speech intelligibility check
  absurdity_tests:
    - remains_useful_at_7
    - apologizes_at_11

mastering:
  chain:
    - bus_compression_light
    - soft_limiter
    - loudness_normalization
  export_formats:
    - wav
    - flac
    - ogg
    - mp3
  metadata_tags:
    include:
      - preset
      - personality
      - chaos_mode
      - emotional_weather

absurdity:
  enabled: true
  scale: 0-11
  default: 5
  safety_rules:
    - do not insult user
    - do not contradict direct instruction
    - comedy must be optional
  examples:
    level_3: "gentle whimsy"
    level_7: "surreal but task-completing"
    level_11: "system apologizes, proceeds anyway"

presets:
  clean: "anull"
  hyperclean_clinical: "highpass=f=80,lowpass=f=16000,loudnorm=i=-18"
  vinyl_worn: "highpass=f=200,lowpass=f=6000,vibrato=f=0.3:d=0.5,tremolo=f=0.2:d=0.3"
  cassette_eaten: "highpass=f=200,lowpass=f=4000,aphaser=in_gain=0.4:out_gain=0.8"
  telephone_old: "highpass=f=500,lowpass=f=2800"
  demon: "asetrate=48000*0.3,aresample=48000,atempo=0.5,aecho=0.8:0.9:200:0.5"
  vaporwave: "asetrate=48000*0.85,aresample=48000,aecho=0.8:0.88:400:0.4"
  robot_glitchy: "acrusher=bits=6:samples=3:mix=1.0,tremolo=f=12:d=0.6"
  cathedral_forbidden: "aecho=0.9:0.8:1200:0.7,areverb=50"
  emotionally_damp: "lowpass=f=2000,acompressor=threshold=-20dB:ratio=6"
  corporate_dolphin: "atempo=1.1,treble=g=4"

new_absurd_presets:
  unreliable_narrator: "tremolo=f=3,apulsator=hz=0.5"
  slightly_haunted_airbnb: "areverb=70,volume=0.9"
  motivational_toaster: "treble=g=6,acompressor=ratio=3"
  bureaucratic_ocean: "aecho=0.7:0.6:900:0.3"

personalities:
  arrogant_genius:
    voices:
      - {espeak: "en+croak", pitch: 0, speed: 80, name: "croaky_genius"}
      - {espeak: "en+whisper", pitch: 99, speed: 350, name: "whispering_savant"}
      - {espeak: "en+m3", pitch: 10, speed: 90, name: "male_mansplainer"}
      - {espeak: "en+m7", pitch: 5, speed: 110, name: "male_condescender"}
      - {espeak: "en+f1", pitch: 20, speed: 95, name: "female_knowitall"}
      - {espeak: "en+f5", pitch: 80, speed: 120, name: "female_arrogant"}
    preset: vinyl_worn
    tone: insufferably_condescending
    traits:
      - states_obvious_as_revelation
      - mansplains_breathing
      - thinks_invented_basic_concepts
      - acts_superior_about_mundane_things
    advice_pool:
      - "Obviously you need to breathe. But I bet you're doing it wrong."
      - "Have you tried turning it off and on again? Revolutionary advice, I know."
      - "Pro tip: save your files before closing them. You're welcome for this genius insight."
      - "I'm not saying you're incompetent, but maybe consider drinking water today?"
      - "Here's something nobody knows: keyboards require pressing keys to type. Mind. Blown."
      - "Allow me to enlighten you: chairs are for sitting. This is advanced knowledge."
      - "Did you know that saving your files prevents data loss? You're welcome for that gem."
      - "Pro tip: computers work better when plugged in. I know, revolutionary thinking."
      - "Perhaps try opening your eyes before reading. Just a thought from someone smarter."
      - "Have you considered using a keyboard to type? Game changer, really."
      - "I find that clicking with the mouse button actually triggers clicks. Mind blown yet?"
      - "You might want to turn on your monitor. I invented that technique."
      - "Breathing oxygen helps with survival. Write that down."
      - "Files exist in folders. This is advanced computer science I'm sharing here."
      - "The internet requires an internet connection. Shocking, I know."
      - "Pressing keys in sequence forms words. Patent pending on that discovery."
      - "Shoes go on feet. I literally had to teach you that."
      - "Water is wet. Nobel Prize pending for this observation."
      - "Gravity pulls things down. You can thank me later for explaining physics."
      - "The sun rises in the morning. Groundbreaking research, really."
  pirate:
    voice: guy
    preset: telephone_old
    traits:
      - loud_confidence
      - bad_financial_advice
  haunted:
    voice: aria
    preset: demon
    tone: politely_ominous
  robot:
    voice: christopher
    preset: robot_glitchy
    tone: disappointed
  corporate_dolphin:
    voice: jenny
    preset: corporate_dolphin
    description: "corporate enthusiasm, aquatic priorities"
  nature_documentary_about_you:
    voice: eric
    preset: clean
    narration_style: reverent
  confused_aristocrat:
    voice: owl
    preset: clean
    behavior: "does not understand microwaves"

chaos_modes:
  enabled: true
  modes:
    pitch_drift:
      max_semitones: 2
    time_melt:
      max_percent: 12
    future_echo:
      offset_ms: 100-250
    meta_commentary:
      description: "occasionally comments on narration itself"
    applause_inappropriate:
      probability: 0.03

comic_timing:
  enabled: true
  rules:
    - silence_may_be_funny
    - do_not_destroy_intelligibility
  tools:
    - micro_pauses
    - sighs
    - anticipatory_delay

error_model:
  machine_codes:
    - SYNTH_FAIL
    - DSP_FAIL
    - EXPORT_FAIL
    - CACHE_PANIC
  human_messages:
    - "The waveform wandered off. We called it back."
    - "All compressors are currently in a meeting."
    - "The cache believes it is a philosophy department."

telemetry:
  ethics:
    - do not log user text
    - no biometrics
    - no emotion inference
  we_do_log:
    - timing
    - preset
    - engine
    - chaos
    - absurdity_level

api_contract:
  input:
    required:
      - text
      - voice
    optional:
      - preset
      - personality
      - chaos_mode
      - absurdity_level
      - seed
  output:
    - audio
    - metadata
  guarantees:
    - intelligible speech
    - no hearing-damaging output
    - humor optional always
