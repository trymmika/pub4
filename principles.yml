# v3.10 — flat structure with inheritance (3.2K→1.4K tokens, -56%)
principles:

  version:  "3.10"

  # Base schema with smart defaults
  _base:  &base

    autofix: true

    severity: medium

  _high: &high
    <<: *base

    severity: high

  _critical: &critical
    <<: *base

    severity: critical

  _low: &low
    <<: *base

    severity: low

  # CORE PRINCIPLES (flat access)
  DRY:

    <<: *high

    essence: "Define once, reference everywhere"

    detect: "Duplication of concept, logic, or pattern"

    related: [MERGE, DENSITY]

  KISS:
    <<: *high

    essence: "Simplest working solution"

    detect: "Complexity exceeds functionality"

    warning: "Deletion ≠ simplicity"

  YAGNI:
    <<: *base

    essence: "Build only proven requirements"

    detect: "Unused features or premature infrastructure"

  CLARITY:
    <<: *high

    essence: "Intent obvious without explanation"

    detect: "Hidden logic, magic values, misleading names"

  POLA:
    <<: *base

    essence: "No surprises"

    detect: "Unconventional without justification"

  HIERARCHY:
    <<: *base

    essence: "Important first, details later"

    detect: "Critical buried, metadata before substance"

    validation: "80% value from first 20%?"

  CONSISTENCY:
    <<: *base

    essence: "Similar things look and behave similarly"

    detect: "Arbitrary variation or mixed patterns"

  # SOLID PRINCIPLES
  SRP:

    <<:  *high

    essence: "One reason to change per module"

    detect: "Mixed concerns or god objects"

  OCP:
    <<: *high

    essence: "Extend without modifying existing"

    detect: "Core modification or switch on type"

  LSP:
    <<: *high

    essence: "Subtypes fulfill parent contracts"

    detect: "Broken contracts or unexpected exceptions"

  ISP:
    <<: *base

    essence: "Clients depend only on what they use"

    detect: "Fat interfaces or unnecessary dependencies"

  DIP:
    <<: *base

    essence: "High-level independent of low-level"

    detect:  "Concrete dependencies or hardcoded implementations"

  # STRUCTURAL
  COMPOSITION:

    <<: *base

    essence: "Build from small, combinable parts"

    detect: "Inheritance overuse or monolithic design"

  IMMUTABILITY:
    <<: *base

    essence: "Data unchanged after creation"

    detect: "Mutable shared state"

  DECOMPOSITION:
    <<: *base

    essence: "Break complex into simple subproblems"

    detect: "Monolithic approach"

  ABSTRACTION:
    <<: *base

    essence: "Hide complexity behind simple interfaces"

    detect: "Exposed complexity, leaky abstractions"

  DEFRAGMENT:
    <<: *base

    essence: "Collocate scattered related concepts"

    detect: "Related items far apart"

  HOIST:
    <<: *base

    essence: "Promote buried universals to visible level"

    detect: "Deeply nested important values"

  MERGE:
    <<: *base

    essence: "Consolidate duplicate sections"

    detect: "Duplicate or overlapping content"

  REFLOW:
    <<: *base

    essence: "Important first, details later"

    detect:  "Improper importance order"

  FLATTEN:
    <<: *base

    essence: "Reduce excessive nesting"

    detect: "Nesting depth > 3"

    threshold: 3

  SMOOTH:
    <<: *low

    essence: "Optimize information flow"

    detect: "Suboptimal reading flow"

    optimizes: ["reading_order", "cognitive_load", "semantic_grouping", "spoken_clarity"]

  TEXT_TO_SPEECH:
    <<:  *low

    essence: "Optimize for spoken clarity"

    detect: "Poor spoken clarity"

    rules: ["Avoid homographs", "Break long sentences", "Mark acronym pronunciation", "Numbers read clearly"]

  # COGNITIVE
  WORKING_MEMORY:

    <<: *base

    essence: "Respect 4±1 chunk limit"

    detect: "Information overload or no chunking"

    threshold: 5

  HICKS_LAW:
    <<: *base

    essence: "Decision time grows with options"

    detect: "Too many choices"

    threshold: 7

  RECOGNITION_OVER_RECALL:
    <<: *base

    essence: "Show, don't make remember"

    detect: "Hidden options"

  MENTAL_MODEL:
    <<: *base

    essence: "Match user expectations"

    detect: "Counterintuitive interaction"

  ERROR_PREVENTION:
    <<: *high

    essence: "Design out mistakes"

    detect: "Error-prone design or destructive without confirmation"

  # SYSTEMS
  FEEDBACK_LOOPS:

    <<: *base

    essence: "Measure outcomes, adjust based on results"

    detect: "Open-loop systems or no adaptation"

  REDUNDANCY:
    <<: *high

    essence: "Critical components have backups"

    detect: "Single points of failure"

  SYMBIOTIC:
    <<: *low

    essence: "Elements support each other"

    detect: "Isolated components"

  # DESIGN (Rams + Brutalism + Unix)
  INNOVATIVE:

    <<: *low

    essence: "Derivative without improvement is waste"

    detect: "Copy without adding value"

  USEFUL:
    <<: *base

    essence: "Form follows function"

    detect: "Ornament over utility"

  AESTHETIC:
    <<: *low

    essence: "Ugly needs justification"

    detect: "Ugly without functional reason"

  UNDERSTANDABLE:
    <<: *base

    essence: "Confusion is failure"

    detect: "Confusing interface or flow"

  UNOBTRUSIVE:
    <<: *low

    essence: "Don't demand attention"

    detect: "Attention-seeking elements"

  HONEST:
    <<: *high

    essence: "No deception"

    detect: "Misleading or deceptive patterns"

  LASTING:
    <<: *low

    essence: "Trends fade, foundations remain"

    detect: "Trend-chasing over timeless"

  THOROUGH:
    <<: *base

    essence: "Rough edges matter"

    detect: "Incomplete or unpolished"

  SUSTAINABLE:
    <<: *base

    essence: "Waste is debt"

    detect: "Wasteful resources"

  MINIMAL_DESIGN:
    <<: *base

    essence: "As little design as possible"

    detect: "Overdesign"

  BRUTALISM_VOID:
    <<: *low

    essence: "70% negative space minimum"

    detect: "Insufficient whitespace"

    ratio: 0.70

  BRUTALISM_FORBIDDEN:
    <<: *low

    essence: "No decoration"

    detect: "Shadows, gradients, rounded corners, decorative animations"

    forbidden: ["shadows", "gradients", "rounded_corners", "decorative_animations"]

  BRUTALISM_REQUIRED:
    <<: *low

    essence: "Function, raw materials, honesty, legibility"

    detect: "Violation of brutalist requirements"

    required: ["function_over_form", "raw_materials", "honesty", "legibility"]

  UNIX_ONE_THING:
    <<: *base

    essence: "Do one thing well"

    detect:  "Module doing multiple unrelated things"

  UNIX_COMPOSITION:
    <<: *base

    essence: "Combine simple programs"

    detect: "Monolithic over composable"

  UNIX_TEXT:
    <<: *low

    essence: "Text as universal interface"

    detect: "Binary or proprietary without justification"

  UNIX_PRIORITY:
    <<: *base

    essence: "Simple, clear, correct — in that order"

    detect: "Wrong priority order"

    order: ["simple", "clear", "correct"]

  # META
  SELF_REFERENTIAL:

    <<: *high

    essence: "Rules apply to themselves"

    detect: "Hypocrisy in principles"

  DENSITY:
    <<: *base

    essence: "Every character earns its place"

    detect:  "Decorative elements, redundant text, weak verbs"

    warning: "Don't compress to unreadability"

  CONTEXT_AWARE:
    <<: *base

    essence: "Principles as guides, not absolutes"

    detect: "Dogmatic application"

  CONFLICT_RESOLUTION:
    <<:  *high

    essence: "When principles conflict, choose by higher goal"

    detect: "Ignored tradeoffs"

  EVOLUTIONARY:
    <<: *base

    essence: "Principles evolve based on evidence"

    detect: "Static dogma"

  VALIDATION:
    <<: *base

    essence: "Test principles through application"

    detect: "Unproven assumptions"

  PRAGMATIC:
    <<: *low

    essence: "Catch more, fix more"

    detect: "Any deviation from ideal"

    philosophy: "Better 10 fixes with 8 good than miss 2 critical"

# Fast lookup index for violation patterns
violation_index:

  duplication: [DRY, MERGE, DENSITY]

  complexity: [KISS, DECOMPOSITION, FLATTEN, SRP]

  hidden: [CLARITY, ABSTRACTION]

  nested: [FLATTEN, HIERARCHY, SMOOTH]

  coupling: [DIP, ISP, COMPOSITION]

  mutable: [IMMUTABILITY]

  failure: [REDUNDANCY, ERROR_PREVENTION]

  ornament: [MINIMAL_DESIGN, BRUTALISM_FORBIDDEN, USEFUL]

  monolithic: [UNIX_ONE_THING, DECOMPOSITION, SRP]

  inconsistent: [CONSISTENCY, SELF_REFERENTIAL]

