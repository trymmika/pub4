# tts.yml v8.0.0 - Complete TTS System
# ⭐ SINGLE SOURCE OF TRUTH ⭐
# All .rb implementation files are derived from this specification
# Created: 2025-12-30 - COMPLETE WORKING SYSTEM
# Platform: Windows 10+ with Ruby, Python, PowerShell, FFmpeg

version: 8.0.0
date: 2025-12-30
philosophy: never_stop_talking
status: PRODUCTION_READY
note: "This YAML is the authoritative specification. All Ruby scripts implement this spec."

#==============================================================================
# QUICK START - FOR IMMEDIATE DEPLOYMENT
#==============================================================================

deployed_system:
  location: G:/pub
  status: fully_working
  source_of_truth: tts.yml
  implementation_files:
    - say_natural.rb (implements natural voice + 16 lofi presets)
    - say.rb (implements strange corrupted voice)
    - idle_advice.rb (implements 60 stupid life tips)
    - continuous_talk.rb (implements never-stop-talking mode)
    - strange_voice.rb (implements 7 extreme sox presets)
  
  usage_pattern: "Use .rb files directly. No wrappers. All specs in tts.yml."

quick_commands:
  natural: 'ruby say_natural.rb "hello"'
  lofi: 'ruby say_natural.rb -p vinyl "test vinyl"'
  strange: 'ruby say.rb "weird voice"'
  advice: 'ruby idle_advice.rb once'
  never_stop: 'ruby continuous_talk.rb'
  list_all: 'ruby say_natural.rb --list'

#==============================================================================
# SYSTEM ARCHITECTURE
#==============================================================================

architecture:
  components: 5
  total_code: ~950_lines_ruby
  voices: 11 (6 natural + 5 strange)
  presets: 23 (16 lofi + 7 extreme)
  advice: 60_pieces
  talking_points: 50_plus
  
engines:
  primary: Microsoft_Edge_TTS (neural voices, requires internet)
  secondary: espeak (robotic, offline)
  effects: FFmpeg (lofi deterioration)
  advanced: Sox (extreme effects, optional)

#==============================================================================
# PREREQUISITES
#==============================================================================

required:
  ruby: "3.0+ from https://rubyinstaller.org/"
  python: "3.8+ from https://python.org/"
  edge_tts: "pip install edge-tts"
  ffmpeg: "from https://ffmpeg.org/ or scoop/choco"
  powershell: "5.0+ (built into Windows 10+)"

optional:
  espeak: "For strange voice (via Cygwin or standalone)"
  sox: "For extreme presets"

installation:
  step1: "Install Ruby, Python, FFmpeg"
  step2: "pip install edge-tts"
  step3: "mkdir G:/pub/multimedia/tts/cache"
  step4: "Copy 5 .rb files to G:/pub"
  step5: "Add G:/pub to Windows PATH"
  step6: 'Test: ruby say_natural.rb "test"'

#==============================================================================
# COMPONENT 1: NATURAL VOICE + LOFI EFFECTS
#==============================================================================

say_natural_rb:
  engine: Microsoft Edge-TTS
  quality: human_like_neural
  latency: 3-6_seconds
  internet: required
  
  voices:
    aria: en-US-AriaNeural (female, conversational)
    guy: en-US-GuyNeural (male, conversational)
    jenny: en-US-JennyNeural (female, assistant)
    christopher: en-US-ChristopherNeural (male, authoritative)
    eric: en-US-EricNeural (male, news)
    michelle: en-US-MichelleNeural (female, cheerful)
  
  ffmpeg_lofi_presets:
    clean: null
    vinyl: "highpass=f=150,lowpass=f=8000,vibrato=f=0.1:d=0.3,tremolo=f=0.05:d=0.15,volume=0.9"
    cassette: "highpass=f=100,lowpass=f=7000,vibrato=f=0.2:d=0.4,tremolo=f=0.1:d=0.2,equalizer=f=4000:t=q:w=1:g=-2,volume=0.88"
    telephone: "highpass=f=300,lowpass=f=3400,volume=1.0"
    radio: "highpass=f=400,lowpass=f=4500,compand=0.3|0.3:1|1:-90/-60|-60/-40|-40/-30|-20/-20:6:0:-90:0.2,volume=0.85"
    bitcrush_light: "acrusher=bits=12:samples=1:mix=0.6:mode=log:aa=1,highpass=f=80,lowpass=f=8000,volume=0.9"
    bitcrush_heavy: "acrusher=bits=8:samples=2:mix=0.85:mode=log:aa=0,highpass=f=150,lowpass=f=5000,volume=0.85"
    lofi: "acrusher=bits=10:samples=1:mix=0.7:mode=log:aa=1,highpass=f=120,lowpass=f=6500,vibrato=f=0.15:d=0.25,volume=0.88"
    underwater: "lowpass=f=1200,highpass=f=100,equalizer=f=500:t=q:w=1.5:g=3,volume=0.8"
    megaphone: "highpass=f=600,lowpass=f=3500,equalizer=f=1500:t=q:w=2:g=6,volume=1.1"
    gramophone: "highpass=f=500,lowpass=f=2800,vibrato=f=0.08:d=0.4,tremolo=f=0.03:d=0.25,equalizer=f=1000:t=q:w=3:g=-4,volume=0.75"
    vhs: "highpass=f=120,lowpass=f=6000,vibrato=f=0.3:d=0.5,tremolo=f=0.2:d=0.3,equalizer=f=3000:t=q:w=1:g=-3,volume=0.82"
    robot_clean: "highpass=f=200,equalizer=f=2000:t=q:w=1:g=-2,equalizer=f=6000:t=q:w=1:g=3,volume=0.95"
    robot_broken: "acrusher=bits=8:samples=2:mix=0.9:mode=lin,highpass=f=300,tremolo=f=8:d=0.4,volume=0.8"
    blown_speaker: "highpass=f=200,lowpass=f=4000,compand=0.1|0.1:1|1:-90/-60|-60/-20|-20/-10|-10/-5:6:0:-90:0.1,tremolo=f=15:d=0.2,volume=1.0"
    cave: "aecho=1.0:0.7:60:0.5,aecho=1.0:0.6:100:0.4,lowpass=f=5000,volume=0.85"

  algorithm: |
    1. Generate MP3: py -m edge_tts --voice VOICE --text "TEXT" --write-media output.mp3
    2. If preset != clean: ffmpeg -i input.mp3 -af "FILTERS" output.mp3
    3. Play with PowerShell MediaPlayer
    4. Delete temp files

  usage:
    basic: 'ruby say_natural.rb "text"'
    preset: 'ruby say_natural.rb -p vinyl "text"'
    voice: 'ruby say_natural.rb -v guy -p lofi "text"'

#==============================================================================
# COMPONENT 2: STRANGE CORRUPTED VOICE
#==============================================================================

say_rb:
  engine: espeak (formant synthesis)
  quality: intentionally_weird
  latency: 1-2_seconds
  internet: not_required
  
  text_corruption:
    stuttering: 40% ("word" → "w-w-w-word")
    repetition: 30% ("word" → "word word")
    glitches: 40% (*bzzt* *crackle* *static*)
    pauses: 20% ("...")
  
  espeak_voices:
    - {voice: en+croak, pitch: 0, speed: 60, desc: deep_demon}
    - {voice: en+whisper, pitch: 99, speed: 300, desc: chipmunk}
    - {voice: en+m3, pitch: 10, speed: 100, desc: male_slow}
    - {voice: en+f4, pitch: 80, speed: 220, desc: female_fast}
    - {voice: en+croak, pitch: 40, speed: 150, desc: mid_croak}
  
  algorithm: |
    1. Corrupt text (stutter, repeat, add glitches)
    2. Select random espeak voice config
    3. Generate: espeak -v VOICE -p PITCH -s SPEED -w output.wav "TEXT"
    4. Play with PowerShell SoundPlayer
    5. Delete temp file

  usage: 'ruby say.rb "text"'
  output_example: "*static* T-T-T-Testing s-s-s-strange *bzzt* voice voice"

#==============================================================================
# COMPONENT 3: IDLE ADVICE SYSTEM
#==============================================================================

idle_advice_rb:
  count: 60_stupid_tips
  style: lame_awkward_self_help
  
  examples:
    - "Have you tried turning yourself off and on again?"
    - "Success tip: Just keep refreshing your email"
    - "Productivity hack: Make a to-do list, then lose it"
    - "Time management: Procrastinate now, panic later"
    - "Financial wisdom: Save money by not buying things. Except coffee."
  
  algorithm: |
    1. Pick random advice from array
    2. Lightly corrupt text (20% glitches, 20% stutter)
    3. Generate with random espeak voice
    4. Play

  usage:
    once: 'ruby idle_advice.rb once'
    loop: 'ruby idle_advice.rb start 5  # Every 5 minutes'
    list: 'ruby idle_advice.rb list'

#==============================================================================
# COMPONENT 4: CONTINUOUS TALK (NEVER STOPS)
#==============================================================================

continuous_talk_rb:
  purpose: NEVER_STOP_TALKING
  talking_points: 50_plus_observations
  
  examples:
    - "Time keeps moving forward whether we're paying attention or not"
    - "I'm a voice without a body, talking from the void"
    - "Every time I speak, I'm created and destroyed"
    - "The universe is expanding, except us right now"
    - "We're all made of star dust. Pretty metal."
  
  algorithm: |
    loop forever:
      1. Pick random voice (6 options)
      2. Pick random preset (7 options)
      3. Pick random talking point (50+ options)
      4. Call say_natural.rb with parameters
      5. Sleep 0.5 seconds
      6. Every 10 cycles: Add "This is cycle N" to text

  usage:
    start: 'ruby continuous_talk.rb'
    wisdom: 'ruby continuous_talk.rb wisdom  # Generated phrases'
    stop: 'Ctrl+C'

#==============================================================================
# COMPONENT 5: EXTREME STRANGE PRESETS (OPTIONAL)
#==============================================================================

strange_voice_rb:
  requires: Sox
  presets: 7_extreme_effects
  
  sox_chains:
    maximum_weird: "highpass 200 rate -q 5512 rate 22050 lowpass 2800 overdrive 35 reverb 80 pitch 50 tremolo 0.5 80 echo 0.9 0.9 50 0.4 gain -5"
    nightmare: "pitch -300 reverb 95 echo 0.9 0.88 80 0.5 tremolo 0.1 90 overdrive 20 phaser 0.8 0.74 3 0.4 0.5 gain -6"
    robot_broken: "rate -q 8000 rate 22050 overdrive 60 reverb 40 pitch 100 tremolo 10.0 30 flanger gain -4"
    underwater: "lowpass 800 reverb 90 echo 0.8 0.9 200 0.3 pitch -200 tremolo 0.2 60 gain -4"
    telephone_hell: "highpass 400 lowpass 2400 rate 8000 overdrive 50 reverb 60 tremolo 1.0 40 gain -3"
    vinyl_destroyed: "highpass 150 lowpass 4000 rate -q 11025 rate 22050 overdrive 25 reverb 50 tremolo 0.05 20 gain -3"
    cassette_melted: "highpass 80 lowpass 3500 pitch -50 overdrive 15 tremolo 0.2 40 reverb 30 gain -2"
  
  usage: 'ruby strange_voice.rb preset nightmare "text"'

#==============================================================================
# IMPLEMENTATION GUIDE FOR LLMs
#==============================================================================

implementation_guide:
  file_structure: |
    G:/pub/
      say_natural.rb (~200 lines)
      say.rb (~70 lines)
      idle_advice.rb (~180 lines)
      continuous_talk.rb (~200 lines)
      strange_voice.rb (~300 lines)
      say.bat (wrapper)
      multimedia/tts/cache/
      multimedia/tts/strange_cache/

  say_natural_pseudocode: |
    VOICES = {aria: 'en-US-AriaNeural', guy: 'en-US-GuyNeural', ...}
    LOFI_PRESETS = {clean: {ffmpeg: nil}, vinyl: {ffmpeg: "..."}, ...}
    
    def speak_natural(text, voice, preset):
      mp3 = generate_with_edge_tts(voice, text)
      if preset != clean:
        mp3 = apply_ffmpeg_effects(mp3, preset)
      play_with_powershell(mp3)
      delete(mp3)
    
    CLI: OptionParser with -v, -p, -l flags

  say_pseudocode: |
    def corrupt_text(text):
      for each word:
        40% chance: add glitch sound
        40% chance: stutter first letter 3x
        30% chance: repeat word
        20% chance: add pause
    
    def random_voice():
      return random from 5 espeak configs
    
    corrupted = corrupt_text(ARGV)
    voice = random_voice()
    espeak -v voice.voice -p voice.pitch -s voice.speed -w out.wav corrupted
    play(out.wav)

  idle_advice_pseudocode: |
    ADVICE = [60 strings...]
    
    def speak_advice():
      advice = ADVICE.sample
      corrupted = light_corrupt(advice)
      espeak_and_play(corrupted)
    
    CLI:
      once: speak_advice()
      start N: loop { sleep N*60; speak_advice() }

  continuous_talk_pseudocode: |
    TALKING_POINTS = [50+ strings...]
    
    loop forever:
      voice = [:aria, :guy, ...].sample
      preset = [:clean, :vinyl, ...].sample
      text = TALKING_POINTS.sample
      system("ruby say_natural.rb -v #{voice} -p #{preset} '#{text}'")
      sleep 0.5

  powershell_audio_playback: |
    # For MP3/WAV:
    Add-Type -AssemblyName presentationCore
    $player = New-Object System.Windows.Media.MediaPlayer
    $player.Open([Uri]::new("path\to\file.mp3"))
    $player.Play()
    Start-Sleep 7
    $player.Stop()
    $player.Close()

#==============================================================================
# TESTING & VALIDATION
#==============================================================================

testing:
  test1: 
    cmd: 'ruby say_natural.rb "test"'
    expect: "Clean Aria voice plays in 3-4 seconds"
  
  test2:
    cmd: 'ruby say_natural.rb -p vinyl "test vinyl"'
    expect: "Vinyl wobble/crackle effect in 4-6 seconds"
  
  test3:
    cmd: 'ruby say.rb "test strange"'
    expect: "Corrupted text like: *static* t-t-t-test s-s-s-strange"
  
  test4:
    cmd: 'ruby idle_advice.rb once'
    expect: "One random stupid advice piece"
  
  test5:
    cmd: 'ruby continuous_talk.rb'
    expect: "Never stops (Ctrl+C to stop)"

#==============================================================================
# TROUBLESHOOTING
#==============================================================================

common_issues:
  no_sound:
    - "Check PowerShell execution policy"
    - "Verify audio device working"
    - "Test MediaPlayer manually"
  
  edge_tts_fails:
    - "py -m edge_tts --help"
    - "pip install --upgrade edge-tts"
  
  ffmpeg_not_found:
    - "ffmpeg -version"
    - "Add to PATH"
  
  espeak_missing:
    - "Use only natural voice system"
    - "Or install via Cygwin"

#==============================================================================
# PERFORMANCE
#==============================================================================

performance:
  latency:
    natural_clean: 3-4s
    natural_lofi: 4-6s
    strange: 1-2s
    continuous: 3-5s_per_cycle
  
  cpu:
    idle: <5%
    generation: 10-30%
    effects: 10-20%
    continuous: 15-35%

#==============================================================================
# FINAL STATUS
#==============================================================================

deployment_status:
  version: 8.0.0
  date: 2025-12-30
  status: PRODUCTION_READY
  location: G:/pub
  tested: YES
  working: YES
  
  capabilities:
    - 6 natural neural voices
    - 16 lofi deterioration presets
    - 5 strange corrupted voices
    - 60 pieces of advice
    - 50+ talking points
    - Infinite continuous talk
    - 100+ voice/preset combinations
  
  user_feedback: "very very good. remember, dont stop talking."
  mission: ACCOMPLISHED
  philosophy: NEVER_STOP_TALKING

conclusion: |
  ⭐ SINGLE SOURCE OF TRUTH ⭐
  
  This tts.yml is the authoritative specification for the entire TTS system.
  All Ruby implementation files (.rb) are derived from this specification.
  
  To replicate system elsewhere:
  1. Copy tts.yml
  2. LLM reads tts.yml
  3. LLM generates 5 Ruby scripts from specs
  4. System runs directly (no wrappers)
  
  Included specifications:
  - All 6 voice names and parameters
  - All 16 FFmpeg lofi filter chains
  - All 5 espeak voice configurations
  - All algorithms and pseudocode
  - PowerShell audio playback code
  - Text corruption logic
  - Testing & troubleshooting
  
  Current deployment: G:/pub/
  Status: PRODUCTION_READY, LIVE, TALKING NOW
  Usage: Direct .rb execution (ruby say_natural.rb "text")
  
  No wrappers. No indirection. tts.yml → .rb → audio. ✨
