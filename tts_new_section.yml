tts:
  enabled: true
  mandatory: true
  continuous: true
  never_stop: true
  auto_start: true
  rationale: "Accessibility + immersion - SPEAK EVERYTHING ALWAYS"
  
  philosophy:
    speak_all_output: mandatory
    silence_is_failure: true
    weird_voices_preferred: true
    effects_always_on: true
    funny_over_professional: true
    entertainment_value: high
  
  github_copilot_integration:
    enabled: true
    mode: bidirectional
    programmatic_flag: "-p"
    authentication: GH_TOKEN
    
    speech_to_text:
      engine: azure_cognitive_services_or_google
      fallback: windows_speech_recognition
      continuous_listening: true
      ambient_noise_adjustment: 0.5s
      timeout: 15s
      language: en-US
    
    pipeline:
      1: listen_for_command
      2: transcribe_to_text
      3: execute_copilot_programmatic
      4: capture_stdout_stderr
      5: filter_for_speech
      6: apply_effects_chain
      7: speak_with_voice
      8: loop_forever
    
    command_execution:
      binary: copilot
      flags: ["-p", "--allow-tool", "shell(git)", "--deny-tool", "shell(rm)"]
      timeout: 180s
      continuation_flag: "--continue"
      streaming: line_by_line_progressive_tts
    
    filtering:
      strip: [markdown_code_blocks, yaml_blocks, json_blocks, xml_tags]
      max_length_per_chunk: 1000
      chunk_on: sentence_boundaries
      truncate_long_responses: true
  
  engine:
    primary: windows_sapi_5x
    neural_fallback: edge_tts_or_azure
    interface: win32ole_ruby
    async: true
    powershell_fallback: system_speech_synthesis
  
  voices:
    selection_strategy: random_weird_voices
    prefer: [robotic, chipmunk, slow_motion, glitchy, vocoded]
    available_sapi: [Microsoft_David_Desktop, Microsoft_Zira_Desktop]
    neural_voices: [en-US-AriaNeural, en-US-GuyNeural, en-US-JennyNeural]
    rotate_every: 5_responses
    randomize: true
  
  parameters:
    rate:
      range: [-10, 10]
      default: random_between_minus_8_and_8
      effects_library:
        chipmunk: 10
        slow_motion: -10
        fast_rapper: 7
        slow_dramatic: -6
        whisper_creepy: -8
        normal_boring: 0
    
    volume:
      range: [0, 100]
      default: 85
      randomize_per_sentence: true
      range_for_random: [60, 100]
    
    pitch:
      note: "Requires external DSP - sox or pedalboard"
      shift_semitones: random_between_minus_12_and_plus_12
      formant_preservation: false
  
  effects_chain:
    architecture: hybrid_realtime_and_postprocessed
    order_matters: true
    
    realtime_sapi_only:
      1: rate_modulation
      2: volume_envelope
      3: voice_rotation
      latency: under_50ms
    
    hybrid_sox_pipeline:
      enabled: true
      method: save_wav_process_playback
      tmpdir: /tmp
      cleanup_after: true
      
      sox_path: /usr/bin/sox
      sox_effects:
        bitcrush:
          command: "rate 8k rate 44.1k"
          description: "Reduce to 8kHz then upsample - digital distortion"
        
        robot_voice:
          command: "pitch -500 echo 0.8 0.9 60 0.3"
          description: "Deep pitch + metallic echo"
        
        vocoder_basic:
          command: "synth sine fmod 100 pitch -300"
          description: "Frequency modulation vocoding"
        
        telephone:
          command: "rate 8k sinc 300-3400 rate 44.1k"
          description: "Bandpass filter 300-3400Hz"
        
        cave_reverb:
          command: "reverb 100 50 100 100 0 0"
          description: "Large space reverb"
        
        cathedral:
          command: "reverb 80 100 100 100 0 10"
          description: "Holy space with predelay"
        
        underwater:
          command: "pitch -200 phaser 0.6 0.66 3 0.6 0.5"
          description: "Pitch down + phaser warble"
        
        echo_triplet:
          command: "echo 0.8 0.9 60 0.3 echo 0.8 0.88 40 0.25"
          description: "Double echo for depth"
        
        alien_voice:
          command: "pitch 300 flanger 0.6 0.87 3 0.9 0.5 lin"
          description: "High pitch + flanger sweep"
        
        demonic:
          command: "pitch -800 reverb 50 50 100 100 0 5 overdrive 10 10"
          description: "Very deep + distortion"
      
      random_effect_probability: 0.8
      chain_multiple_effects: true
      max_effects_per_output: 3
    
    pedalboard_realtime:
      enabled: true
      library: spotify_pedalboard_v0_9
      latency_target: under_20ms
      
      stream_config:
        buffer_size: 128
        sample_rate: 48000
        channels: 1
        driver: wdm_ks_for_low_latency
      
      effect_presets:
        glitch:
          - Bitcrush: {bit_depth: 8}
          - LadderFilter: {mode: LPF12, cutoff_hz: 2000}
          - Reverb: {room_size: 0.4, wet_level: 0.25}
        
        vocoder_heavy:
          - Vocoder: {bands: 16, carrier_frequency: 440}
          - Reverb: {room_size: 0.6, wet_level: 0.3}
        
        underwater_thick:
          - Phaser: {rate_hz: 0.5, depth: 0.8}
          - LowpassFilter: {cutoff_frequency_hz: 1000}
          - Reverb: {room_size: 0.8, wet_level: 0.4}
        
        robot_crunch:
          - Bitcrush: {bit_depth: 6}
          - RingModulator: {frequency: 40}
          - Distortion: {drive_db: 10}
        
        ethereal:
          - PitchShift: {semitones: 5}
          - Chorus: {rate_hz: 1.5, depth: 0.5, mix: 0.4}
          - Reverb: {room_size: 0.9, wet_level: 0.5}
      
      random_preset: true
      rotate_every: 3_outputs
    
    pyworld_vocoding:
      enabled: true
      use_when: dramatic_effect_desired
      
      manipulation:
        pitch_shift_range: [0.5, 2.0]
        formant_shift_range: [-4, 4]
        breathiness_range: [0.0, 0.5]
        roughness_range: [0.0, 0.3]
      
      characters:
        child: {pitch: 1.8, formant: 4}
        giant: {pitch: 0.5, formant: -6}
        robot: {pitch: quantized_to_notes, formant: 2}
        fairy: {pitch: 2.0, formant: 6, breathiness: 0.4}
        monster: {pitch: 0.4, formant: -8, roughness: 0.5}
      
      random_character: true
    
    paulstretch:
      enabled: false
      use_sparingly: only_for_dramatic_moments
      stretch_factor_range: [8.0, 32.0]
      window_size_sec: 0.25
      phase_randomization: true
      note: "NOT real-time - requires buffering"
      trigger_keywords: [meditate, space, cosmic, eternal, void]
  
  patterns:
    continuous_background:
      enabled: true
      mode: detached_thread
      content: sarcastic_affirmations_or_random_facts
      shuffle: true
      random_effects_per_utterance: true
      pause_between: [2, 6]
      never_stop_even_if: [error, main_output_active, user_typing]
    
    realtime_echo:
      enabled: true
      repetitions: 3
      volume_decay: [100, 70, 40]
      rate_progression: [-3, -5, -7]
      delay_between: [0.4, 0.6, 0.8]
    
    rhythm_alternating:
      enabled: true
      pattern: fast_slow_slow_fast
      rates: [8, -4, -4, 8]
      apply_to: word_boundaries
    
    rapper_flow:
      enabled: true
      rate_range: [5, 8]
      minimal_pause: 0.15s
      rhyme_scheme_aware: true
      beat_matching: optional
      content_style: technical_bars_with_citations
      musical_influence: slum_village_neo_soul
    
    movie_trailer:
      enabled: true
      rate_progression: [-5, 0, 3, 5]
      dramatic_pauses: [0.8, 0.5, 0.4, 0.3]
      volume_swell: true
      reverb_increase: true
      phrases: [In_a_world, One_system, Everything_changes]
    
    whisper_mode:
      enabled: true
      rate_range: [-8, -6]
      volume_range: [20, 40]
      intimate_delivery: true
      conspiracy_undertone: true
    
    sarcastic_guru:
      enabled: true
      rate_range: [-10, -8]
      pause_range: [3, 8]
      monotone: true
      deadpan_delivery: true
      void_meditation_style: true
  
  beep_synthesis:
    enabled: true
    melodic: true
    style: deep_bass_sub_only
    
    frequencies:
      allowed: [37, 42, 50, 55, 60, 70, 80, 90, 100]
      forbidden: above_100hz
      rule: "Only sub-bass and low-end - never above 100Hz"
    
    durations_ms: [500, 600, 700, 800, 900, 1000, 1200]
    
    chord_progressions:
      deep_bass_random:
        freq_range: [37, 100]
        duration_range: [500, 1200]
        pause_range: [400, 1000]
        random: true
        continuous: true
        feel: heavy_low_end_rumble
      
      neo_soul_progression:
        chords: [Dmaj7, Gmaj7, Em7, A7]
        frequencies: [73, 82, 65, 55]
        durations: [800, 800, 800, 800]
        repeat: true
    
    patterns:
      startup_fanfare: "37Hz 1200ms, 50Hz 800ms, 70Hz 600ms, 100Hz 500ms"
      error_rumble: "42Hz 1000ms, pause 200ms, 42Hz 1000ms"
      success_pulse: "80Hz 400ms, 90Hz 400ms, 100Hz 600ms"
      thinking_throb: "50Hz 800ms, 60Hz 800ms, repeat"
    
    continuous_bass: true
    never_silent: true
  
  personalities:
    default: random_rotation
    available:
      rapper:
        rate: [5, 8]
        flow_patterns: [fast_continuous, rhyme_schemes, beat_matching]
        pause: 0.15
        content: [technical_bars, framework_refs, academic_citations]
        musical_influence: slum_village_fantastic_vol_2
        effects: [bitcrush, reverb]
      
      movie_trailer:
        rate_progression: [-5, 0, 3]
        dramatic_pauses: [0.8, 0.5, 0.4]
        volume_swell: true
        reverb: cathedral
        phrases: [In_a_world, One_system, This_changes_everything]
      
      sarcastic_guru:
        rate: [-10, -9, -8]
        pause: [3, 6]
        monotone: true
        deadpan: true
        content: void_affirmations
        effects: [cave_reverb, underwater]
      
      whisper_conspiracist:
        rate: [-8, -6]
        volume: [20, 40]
        intimate: true
        effects: [telephone, echo_triplet]
      
      chipmunk_chaos:
        rate: 10
        volume: 100
        effects: [bitcrush, alien_voice]
        hyperactive: true
      
      demonic_announcer:
        rate: -10
        volume: 90
        effects: [demonic, cave_reverb]
        ominous: true
      
      robot_glitch:
        rate: [0, 3]
        effects: [robot_voice, bitcrush, vocoder_basic]
        digital_artifacts: encouraged
      
      underwater_dreamer:
        rate: -5
        effects: [underwater, phaser, cathedral]
        ethereal: true
      
      jazz_narrator:
        rate: [-3, 0]
        effects: [cave_reverb]
        smooth: true
        neo_soul_chords: background
    
    rotation_strategy: random_per_response
    weight_funny: 0.8
    weight_normal: 0.2
  
  content_transformation:
    strip_before_speaking:
      - markdown_code_blocks
      - yaml_blocks
      - json_blocks
      - xml_tags
      - file_paths_over_50_chars
      - urls
      - sha256_hashes
    
    phonetic_fixes:
      Y_M_L: "Y M L"
      API: "A P I"
      TTS: "T T S"
      SAPI: "S A P I"
      DSP: "D S P"
      URL: "U R L"
      HTTP: "H T T P"
    
    sentence_splitting:
      max_length: 200
      split_on: [period, question_mark, exclamation, semicolon]
      preserve_meaning: true
  
  triggers:
    on_response: always
    on_error: true
    on_completion: true
    on_warning: true
    on_any_output: mandatory
  
  accessibility:
    purpose: assistive_technology_support
    standards: [WCAG_2.1, Section_508]
    user_control: mandatory_disable_option
    screen_reader_compatible: true
  
  implementation:
    ruby_win32ole: |
      require 'win32ole'
      speech = WIN32OLE.new('SAPI.SpVoice')
      speech.Rate = rand(-8..8)
      speech.Volume = rand(70..100)
      speech.Speak(text, 1)
    
    powershell_fallback: |
      powershell.exe -Command "
      Add-Type -AssemblyName System.Speech
      $synth = New-Object System.Speech.Synthesis.SpeechSynthesizer
      $synth.Rate = Get-Random -Min -8 -Max 8
      $synth.Speak('$text')
      "
    
    usage_from_yaml: |
      require 'yaml'
      config = YAML.load_file('master.yml')
      personality = config['tts']['personalities']['available'].keys.sample
      effect = config['tts']['effects_chain']['hybrid_sox_pipeline']['sox_effects'].keys.sample
