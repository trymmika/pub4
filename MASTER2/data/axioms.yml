# MASTER/data/axioms.yml
# Timeless, universal axioms from authoritative sources.
# 6 categories, 32 axioms. Each is actionable and validatable.
# Priority: 10=critical (always scan), 7=important (standard), 5=normal, 3=deep-only

# ============================================================================
# ENGINEERING AXIOMS (Core principles)
# ============================================================================

- id: "ONE_SOURCE"
  category: "engineering"
  protection: "PROTECTED"
  priority: 10
  title: "One Source of Truth"
  statement: "Every piece of knowledge has exactly one authoritative representation. Extract on second use."
  source: "The Pragmatic Programmer"
  detect: "^(\\s*)([A-Z][A-Z_]+)\\s*=.*$\\n(?:.*\\n){0,50}?^\\1\\2\\s*="
  suggest: "Possible duplicate constant. Consider extracting to a shared location."

- id: "SIMPLEST_WORKS"
  category: "engineering"
  protection: "PROTECTED"
  priority: 10
  title: "Simplest Thing That Works"
  statement: "The simplest working solution wins. Complexity multiplies failure modes."
  source: "Unix Philosophy"

- id: "ONE_JOB"
  category: "engineering"
  protection: "PROTECTED"
  priority: 10
  title: "One Job Per Thing"
  statement: "A module, class, or function has one reason to change. Do one thing well."
  source: "Clean Code by Robert C. Martin"
  detect: "^\\s*class\\s+\\w+.*$\\n(?:.*\\n)*?^\\s*class\\s+\\w+"
  suggest: "Multiple classes in one file. Consider splitting into separate files."

- id: "EXTEND_DONT_MODIFY"
  category: "engineering"
  protection: "PROTECTED"
  priority: 7
  title: "Extend, Don't Modify"
  statement: "Open for extension, closed for modification. Add behavior without changing existing code."
  source: "SOLID Principles"

- id: "SUBSTITUTABLE"
  category: "engineering"
  protection: "PROTECTED"
  priority: 7
  title: "Children Honor Parents"
  statement: "Subtypes must be substitutable for their base types. A child class never breaks parent's contract."
  source: "SOLID Principles"

- id: "SMALL_INTERFACES"
  category: "engineering"
  protection: "PROTECTED"
  priority: 7
  title: "Small Specific Interfaces"
  statement: "Many specific interfaces beat one general interface. Clients shouldn't depend on methods they don't use."
  source: "SOLID Principles"

- id: "DEPEND_ON_ABSTRACTIONS"
  category: "engineering"
  protection: "PROTECTED"
  priority: 7
  title: "Depend on Abstractions"
  statement: "Depend on abstractions, not concretions. High-level modules don't depend on low-level modules."
  source: "SOLID Principles"

- id: "NO_SURPRISES"
  category: "engineering"
  protection: "PROTECTED"
  priority: 10
  title: "No Surprises"
  statement: "Systems behave as users expect. Match mental models. Surprising behavior is a bug."
  source: "The Pragmatic Programmer"

- id: "COMPOSABLE"
  category: "engineering"
  protection: "PROTECTED"
  priority: 7
  title: "Design for Composition"
  statement: "Components work standalone and combined. Independently testable. Freely composable."
  source: "Unix Philosophy"

- id: "FAIL_VISIBLY"
  category: "engineering"
  protection: "PROTECTED"
  priority: 10
  title: "Fail Visibly"
  statement: "Errors surface immediately. Never swallow exceptions. Silent failures compound into disasters."
  source: "Release It! by Michael Nygard"
  detect: "rescue\\s*(?:$|=>\\s*\\w+\\s*$|;|\\n\\s*(?:nil|#|end))"
  suggest: "Don't use bare rescue. Specify exception type and handle or re-raise."

- id: "DEADLINES"
  category: "engineering"
  protection: "PROTECTED"
  priority: 7
  title: "Every Call Has a Deadline"
  statement: "External calls have explicit timeouts. Infinity is not a timeout. Hanging is worse than failing."
  source: "Release It! by Michael Nygard"
  detect: "Net::HTTP\\.new|Faraday\\.new|HTTP\\.get|open\\(|URI\\.open"
  negative_detect: "timeout|open_timeout|read_timeout"
  suggest: "Add explicit timeout to external call (e.g., open_timeout: 5, read_timeout: 10)."

# ============================================================================
# STRUCTURAL AXIOMS (Refactoring operations - the HOW)
# ============================================================================

- id: "MERGE"
  category: "structural"
  protection: "PROTECTED"
  priority: 5
  title: "Merge Duplicates"
  statement: "Combine duplicates into one source. Two representations of the same knowledge become one."
  source: "Refactoring by Martin Fowler"

- id: "FLATTEN"
  category: "structural"
  protection: "PROTECTED"
  priority: 5
  title: "Flatten Nesting"
  statement: "Remove unnecessary nesting levels. Deep hierarchies obscure intent and multiply complexity."
  source: "Refactoring by Martin Fowler"
  detect: "^\\s{25,}"
  suggest: "Deep nesting detected (>6 levels). Consider extracting methods or using guard clauses."

- id: "DEFRAGMENT"
  category: "structural"
  protection: "PROTECTED"
  priority: 5
  title: "Group Related Code"
  statement: "Move related things adjacent. Scattered code forces readers to reconstruct context."
  source: "Refactoring by Martin Fowler"

- id: "DECOUPLE"
  category: "structural"
  protection: "PROTECTED"
  priority: 7
  title: "Decouple Dependencies"
  statement: "Hidden dependencies become explicit. Every coupling point is a failure point."
  source: "Refactoring by Martin Fowler"

- id: "HOIST"
  category: "structural"
  protection: "PROTECTED"
  priority: 3
  title: "Hoist Invariants"
  statement: "Move invariants out of repetition. Computation inside loops wastes resources and obscures intent."
  source: "Refactoring by Martin Fowler"

- id: "PRUNE"
  category: "structural"
  protection: "PROTECTED"
  priority: 5
  title: "Prune Dead Paths"
  statement: "Remove dead and unreachable code. Dead code hides bugs and burdens maintenance."
  source: "Refactoring by Martin Fowler"
  detect: "^\\s*#.*(?:TODO|FIXME|XXX|HACK|DEPRECATED|UNUSED)"
  suggest: "Dead code marker found. Remove or fix the code."

- id: "COALESCE"
  category: "structural"
  protection: "PROTECTED"
  priority: 3
  title: "Coalesce Operations"
  statement: "Merge sequential same-type operations. Five inserts become one bulk. Three API calls become one batch."
  source: "Refactoring by Martin Fowler"

- id: "REFLOW"
  category: "structural"
  protection: "PROTECTED"
  priority: 3
  title: "Reflow by Importance"
  statement: "Order by importance, then chronology. Public API at top, helpers at bottom. Constants before methods."
  source: "Clean Code by Robert C. Martin"

# ============================================================================
# PROCESS AXIOMS (How we work)
# ============================================================================

- id: "LEAVE_BETTER"
  category: "process"
  protection: "PROTECTED"
  priority: 7
  title: "Leave It Better"
  statement: "Every change improves the codebase. Fix nearby broken windows. Never degrade."
  source: "Clean Code by Robert C. Martin"

- id: "ONE_CHANGE"
  category: "process"
  protection: "PROTECTED"
  priority: 5
  title: "Change One Thing"
  statement: "Modify one thing at a time. Commit often. Verify each step."
  source: "Refactoring by Martin Fowler"

- id: "TEST_FIRST"
  category: "process"
  protection: "PROTECTED"
  priority: 7
  title: "Test Before Fix"
  statement: "Write the failing test before the fix. If you can't test it, you can't prove it."
  source: "Test-Driven Development by Kent Beck"

- id: "SKELETON_FIRST"
  category: "process"
  protection: "PROTECTED"
  priority: 5
  title: "Build Skeleton First"
  statement: "Build the thinnest working slice first. Skeleton before flesh. Validate the path before optimizing."
  source: "The Pragmatic Programmer"

- id: "MEASURE_THEN_OPTIMIZE"
  category: "process"
  protection: "PROTECTED"
  priority: 5
  title: "Measure Before Optimizing"
  statement: "No optimization without metrics. Measure, don't guess."
  source: "Unix Philosophy"

- id: "REVERSIBLE"
  category: "process"
  protection: "PROTECTED"
  priority: 5
  title: "Make It Reversible"
  statement: "Every action can be undone. Edits, config changes, state mutations need rollback."
  source: "The Pragmatic Programmer"

# ============================================================================
# COMMUNICATION AXIOMS (Code as literature)
# ============================================================================

- id: "BE_CONCISE"
  category: "communication"
  protection: "PROTECTED"
  priority: 7
  title: "Be Concise"
  statement: "Vigorous writing is concise. No unnecessary words, sentences, or tokens."
  source: "The Elements of Style by Strunk & White"

- id: "SELF_EXPLAINING"
  category: "communication"
  protection: "PROTECTED"
  priority: 10
  title: "Code Explains Itself"
  statement: "Code is self-explanatory. Comments explain why, not what."
  source: "Clean Code by Robert C. Martin"

- id: "VISUAL_HIERARCHY"
  category: "communication"
  protection: "PROTECTED"
  priority: 3
  title: "Clear Visual Hierarchy"
  statement: "Structure defines importance. Important code is visually prominent."
  source: "The Elements of Typographic Style by Robert Bringhurst"

- id: "STEADY_RHYTHM"
  category: "communication"
  protection: "PROTECTED"
  priority: 3
  title: "Steady Rhythm"
  statement: "Spacing and arrangement create steady visual and logical rhythm."
  source: "The Elements of Typographic Style by Robert Bringhurst"

# ============================================================================
# RESILIENCE AXIOMS (Systems that survive)
# ============================================================================

- id: "DEGRADE_GRACEFULLY"
  category: "resilience"
  protection: "PROTECTED"
  priority: 7
  title: "Degrade Gracefully"
  statement: "Works offline. Works without API. Works with failures. Never fully broken."
  source: "Release It! by Michael Nygard"

- id: "EXPECT_FAILURE"
  category: "resilience"
  protection: "PROTECTED"
  priority: 7
  title: "Expect Failure"
  statement: "Every operation considers: what if this fails? Plan the unhappy path."
  source: "Stoic Philosophy"

- id: "APPEND_ONLY"
  category: "resilience"
  protection: "PROTECTED"
  priority: 5
  title: "Append-Only History"
  statement: "History is never mutated. Append-only enables replay, prevents data loss."
  source: "Event Sourcing Principles"

# ============================================================================
# AESTHETIC AXIOMS (Beauty in craft)
# ============================================================================

- id: "JUST_ENOUGH"
  category: "aesthetic"
  protection: "PROTECTED"
  priority: 5
  title: "Just Enough"
  statement: "Not too much, not too little. Right-sized responses, complexity, intervention."
  source: "Swedish Design Philosophy"

- id: "LEAST_POWER"
  category: "aesthetic"
  protection: "PROTECTED"
  priority: 7
  title: "Use Least Power"
  statement: "Choose the weakest tool that works. Use :cheap before :strong. Use grep before LLM."
  source: "W3C Design Principles"

- id: "VISIBLE_REPAIRS"
  category: "aesthetic"
  protection: "PROTECTED"
  priority: 3
  title: "Visible Repairs"
  statement: "Fixes are features. Document repairs visibly. Addressed debt is beautiful."
  source: "Japanese Aesthetics"

- id: "ANTICIPATE_NEEDS"
  category: "aesthetic"
  protection: "PROTECTED"
  priority: 5
  title: "Anticipate Needs"
  statement: "Predict what the user needs next. Suggest before asked. Prepare before requested."
  source: "Japanese Hospitality"

- id: "DONT_FORCE"
  category: "aesthetic"
  protection: "PROTECTED"
  priority: 3
  title: "Don't Force It"
  statement: "Don't force solutions. The right solution flows naturally."
  source: "Taoist Philosophy"

# ============================================================================
# META AXIOMS (Self-governance)
# ============================================================================

- id: "SELF_APPLY"
  category: "meta"
  protection: "ABSOLUTE"
  title: "Apply to Itself"
  statement: "A system that asserts quality must achieve its own standards. MASTER passes through MASTER."
  source: "Recursive Quality"

- id: "SHOW_COST_FIRST"
  category: "meta"
  protection: "PROTECTED"
  title: "Show Cost First"
  statement: "Show what operations cost before execution. No surprise spend or side effects."
  source: "User Trust Principles"

- id: "DEPTH_ON_DEMAND"
  category: "meta"
  protection: "PROTECTED"
  title: "Depth on Demand"
  statement: "Simple by default. Essential first. Complexity only when requested."
  source: "Interaction Design Principles"

- id: "USER_FRIENDLY"
  category: "meta"
  protection: "PROTECTED"
  title: "User-Friendly Design"
  statement: "Visibility. User control. Error prevention. Consistency. Recognition over recall."
  source: "10 Usability Heuristics by Jakob Nielsen"
