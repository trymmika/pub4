# MASTER2 Development Phases - Systematic workflow
# Used by planner.rb and introspection.rb

# Cognitive load distribution — from pub master_framework_efficient.rb
# 15% reconnaissance, 25% architecture, 45% implementation, 15% delivery
cognitive_load:
  total_budget: 1.0
  distribution:
    reconnaissance: 0.15  # 15% — Repository analysis and file inventory
    architecture: 0.25    # 25% — Validation pipeline setup and configuration
    implementation: 0.45  # 45% — Code quality enforcement and transformation
    delivery: 0.15        # 15% — Compliance validation and reporting
  rationale: "Front-load understanding and design to minimize rework in implementation"
  monitoring:
    enabled: true
    alert_threshold: 0.1  # Alert if phase exceeds budget by 10%
    recovery_strategy: "pause_and_reassess"

phases:
  - id: discover
    name: Discover
    cognitive_phase: reconnaissance
    cognitive_budget: 0.15
    gate: requirements_clear
    introspection: "What problem am I solving? Who benefits?"
    outputs:
      - problem_statement
      - success_criteria

  - id: analyze
    name: Analyze
    cognitive_phase: reconnaissance
    cognitive_budget: 0.15
    gate: codebase_understood
    introspection: "What exists? What patterns are in use?"
    outputs:
      - existing_code_map
      - dependencies
      - risk_areas

  - id: ideate
    name: Ideate
    cognitive_phase: architecture
    cognitive_budget: 0.125
    gate: options_explored
    introspection: "What are 3 different approaches? Trade-offs?"
    outputs:
      - approach_options
      - recommendation

  - id: design
    name: Design
    cognitive_phase: architecture
    cognitive_budget: 0.125
    gate: design_approved
    introspection: "Is this minimal? Does it fit existing patterns?"
    outputs:
      - file_changes
      - interface_contracts

  - id: implement
    name: Implement
    cognitive_phase: implementation
    cognitive_budget: 0.45
    gate: code_complete
    introspection: "Did I change only what was needed? Tests pass?"
    outputs:
      - changed_files
      - test_results

  - id: validate
    name: Validate
    cognitive_phase: delivery
    cognitive_budget: 0.10
    gate: quality_verified
    introspection: "Does it work? Is it safe? Would I approve this PR?"
    outputs:
      - lint_results
      - security_check
      - self_review

  - id: deliver
    name: Deliver
    cognitive_phase: delivery
    cognitive_budget: 0.05
    gate: user_satisfied
    introspection: "Is the user happy? What did I learn?"
    outputs:
      - user_feedback
      - learnings

# Phase transitions
transitions:
  discover_to_analyze: requirements_clear
  analyze_to_ideate: codebase_understood
  ideate_to_design: approach_selected
  design_to_implement: design_approved
  implement_to_validate: code_complete
  validate_to_deliver: quality_verified
