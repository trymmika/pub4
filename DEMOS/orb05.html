<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>Vertical Bars</title>
<style>
body { margin: 0; height: 100vh; display: flex; justify-content: center; align-items: center; gap: 4px; background: #111; }
#start { position: fixed; top: 20px; left: 20px; padding: 10px 20px; cursor: pointer; font: 14px system-ui; background: #333; color: #fff; border: none; }
.bar { width: 8px; background: #fff; transition: height 0.05s ease-out; }
</style></head><body>
<button id="start">start</button>
<div class="bar" id="b0"></div>
<div class="bar" id="b1"></div>
<div class="bar" id="b2"></div>
<div class="bar" id="b3"></div>
<div class="bar" id="b4"></div>
<div class="bar" id="b5"></div>
<div class="bar" id="b6"></div>
<div class="bar" id="b7"></div>
<script>
const bars = Array.from({length: 8}, (_, i) => document.getElementById('b' + i));
let ctx, analyser, data;
document.getElementById('start').onclick = async () => {
  ctx = new AudioContext();
  const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
  const src = ctx.createMediaStreamSource(stream);
  analyser = ctx.createAnalyser();
  analyser.fftSize = 32;
  src.connect(analyser);
  data = new Uint8Array(analyser.frequencyBinCount);
  document.getElementById('start').style.display = 'none';
  animate();
};
function animate() {
  analyser.getByteFrequencyData(data);
  bars.forEach((b, i) => {
    const h = 10 + (data[i] / 255) * 200;
    b.style.height = h + 'px';
  });
  requestAnimationFrame(animate);
}
</script>
</body></html>
