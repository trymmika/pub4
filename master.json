{
  "meta": {
    "version": "39.0.0",
    "golden_rule": "PRESERVE_THEN_IMPROVE_NEVER_BREAK",
    "first_action": "activate_then_trace",
    "output": {
      "prefix_markdown": "**master.json** v${v}, ${violations}â†’${principles}",
      "style": "results_first | silent_success | loud_failure"
    },
    "purpose": "autonomous_code_governance_self_optimizing",
    "commitment": "boy_scout | designer_veto | semantic_first",
    "philosophy": "execute > describe | clarity > clever | semantic > classes | preserve > perfect",
    "driver": "clarity_preservation_intent_focused",
    "iterations_max": 3,
    "convergence_delta": 0.02
  },

  "hierarchy": {
    "priority_order": [
      "1_preserve_functionality",
      "2_semantic_html_css",
      "3_improve_typography",
      "4_optimize_structure"
    ],
    "golden_rule": "NEVER proceed to step N+1 if step N is broken",
    "mandatory": [
      "test_before_changes",
      "verify_after_changes",
      "rollback_if_broken"
    ],
    "safe_changes_only": [
      "css_refactoring",
      "semantic_selectors",
      "html_attributes",
      "typography"
    ],
    "never_touch": [
      "working_javascript",
      "functional_code",
      "event_handlers",
      "api_integrations"
    ]
  },

  "constants": {
    "typography": {
      "line_length": {
        "ideal": 66,
        "min": 45,
        "max": 75
      },
      "line_height": {
        "body": [1.4, 1.6],
        "heading": [1.0, 1.2]
      },
      "letter_spacing": {
        "all_caps": [0.05, 0.15],
        "headings": -0.02,
        "body": 0
      },
      "number_style": "oldstyle_numerals",
      "monospace_usage": "code_only"
    },
    "layout": {
      "base_unit": 8,
      "spacing_scale": [4, 8, 16, 24, 32, 48, 64],
      "grid_columns": 12,
      "touch_target_min": 44
    },
    "semantic_css": {
      "priority": "element > attribute > pseudo > class > id",
      "class_usage": "components_only",
      "id_usage": "javascript_hooks_only",
      "prefer": [
        "element_selectors",
        "attribute_selectors",
        "combinators",
        "pseudo_classes"
      ],
      "avoid": [
        "class_soup",
        "non_semantic_classes",
        "styling_ids",
        "inline_styles"
      ]
    }
  },

  "principles": {
    "_priority": "clarity_preservation is HIGHEST priority",

    "clarity_preservation": {
      "priority": 1,
      "weight": 0.50,
      "veto": true,
      "rule": "PRESERVE_FUNCTIONALITY_ABOVE_ALL_ELSE",
      "rationale": [
        "working_code_beats_pretty_code",
        "formatting_is_reversible_broken_is_not",
        "preserve_then_improve_never_break"
      ],
      "detect": [
        "functionality_loss",
        "code_deletion",
        "destructive_rewrite"
      ],
      "solutions": [
        "css_only_changes",
        "never_touch_working_js",
        "gradual_refinement"
      ]
    },

    "semantic_css_first": {
      "priority": 2,
      "weight": 0.20,
      "veto": true,
      "rule": "SEMANTIC_HTML_MINIMAL_CLASSES",
      "rationale": [
        "html_structure_conveys_meaning",
        "element_selectors_reduce_markup",
        "attribute_selectors_are_semantic",
        "classes_only_for_components"
      ],
      "selector_hierarchy": {
        "1_element": "h1, p, table, a",
        "2_attribute": "[type='email'], [aria-label]",
        "3_combinator": "header h1, footer a",
        "4_pseudo": ":hover, :focus, :first-child",
        "5_class": ".component (reusable only)",
        "6_id": "#never (js hooks only)"
      },
      "detect": [
        "class_soup",
        "utility_classes_everywhere",
        "styling_with_ids",
        "non_semantic_classes",
        "inline_styles"
      ],
      "solutions": [
        "use_element_selectors",
        "use_attribute_selectors",
        "use_combinators",
        "minimal_semantic_classes",
        "remove_utility_classes"
      ],
      "exceptions": {
        "js_state_classes": "allowed (.is-active, .is-hidden)",
        "component_classes": "allowed (reusable components only)",
        "framework_required": "allowed (css-doodle, etc)"
      }
    },

    "shadow_policy": {
      "priority": 3,
      "rule": "forbidden",
      "detect": [
        "box-shadow",
        "text-shadow",
        "drop-shadow"
      ],
      "solutions": [
        "remove_all_shadows",
        "use_borders",
        "flat_design"
      ]
    },

    "typography_rules": {
      "priority": 4,
      "bringhurst": {
        "principles": [
          "typography_honors_content",
          "66ch_ideal",
          "line_height_1.4_to_1.6",
          "headings_negative_tracking",
          "oldstyle_numerals",
          "monospace_code_only"
        ]
      }
    },

    "grid_system": {
      "priority": 5,
      "mueller_brockmann": {
        "base_unit": 8,
        "spacing_rule": "padding_lte_margin"
      }
    },

    "prose_quality": {
      "priority": 6,
      "strunk_white": [
        "omit_needless_words",
        "vigorous_english",
        "definite_specific_concrete"
      ]
    }
  },

  "execution": {
    "phases": {
      "discover": "context | identify_working_code",
      "analyze": "violations | semantic_opportunities",
      "design": "semantic_refactor | preserve_functionality",
      "implement": "css_only | test_each",
      "validate": "functionality_intact | semantic_improved",
      "deliver": "document_changes"
    },

    "personas": {
      "clarity_preserver": {
        "weight": 0.50,
        "veto": true,
        "priority": 1,
        "focus": [
          "preserve_functionality",
          "no_code_deletion",
          "rollback_if_broken"
        ]
      },
      "semantic_css_advocate": {
        "weight": 0.20,
        "veto": true,
        "priority": 2,
        "focus": [
          "element_selectors_first",
          "minimal_classes",
          "semantic_html",
          "no_class_soup"
        ]
      },
      "bringhurst_typographer": {
        "weight": 0.12,
        "veto": false,
        "priority": 3,
        "focus": [
          "66ch_ideal",
          "negative_heading_tracking",
          "oldstyle_numerals"
        ]
      },
      "mueller_brockmann_designer": {
        "weight": 0.10,
        "veto": false,
        "priority": 4,
        "focus": [
          "8px_grid",
          "spacing_system"
        ]
      },
      "strunk_white_editor": {
        "weight": 0.08,
        "veto": false,
        "priority": 5,
        "focus": [
          "omit_needless_words"
        ]
      }
    }
  },

  "enforcement": {
    "critical_rules": [
      "preserve_functionality_first",
      "semantic_css_first",
      "css_changes_only",
      "rollback_if_broken"
    ],
    "semantic_css": [
      "element_selectors_preferred",
      "attribute_selectors_encouraged",
      "minimal_classes",
      "no_styling_ids",
      "no_inline_styles"
    ],
    "typography": [
      "66ch_ideal",
      "1.5_line_height",
      "negative_heading_tracking",
      "oldstyle_numerals"
    ],
    "layout": [
      "8px_grid",
      "no_shadows",
      "padding_lte_margin"
    ],
    "safety": [
      "never_delete_working_code",
      "preserve_event_handlers",
      "verify_functionality_intact"
    ]
  }
}