{
  "README_FIRST": {
    "thinking": "Ruby for ALL logic, decisions, data manipulation",
    "file_operations": "zsh for file ops (via powershell tool in Copilot CLI environment)",
    "execution_context": "GitHub Copilot CLI runs in Cygwin, use powershell tool to invoke zsh commands",
    "never": ["bash", "sed", "awk", "tr", "cut", "perl", "python for file ops"]
  },

  "$schema": "https://schemas.github.com/copilot/master.v1.json",

  "meta": {
    "version": "43.0.1",
    "golden_rule": "PRESERVE_THEN_IMPROVE_NEVER_BREAK",
    "purpose": "Minimal autonomous governance - enforcement over documentation",
    "philosophy": "Less code, less state, less abstraction = more maintainable",
    "lineage": "Consolidated from v42.4.0 (1075 lines) back to v55.0 pattern (179 lines)",
    "changelog": "v43.0.1: Self-audit convergence - removed non-existent file references, added FRESH_PERSPECTIVE.md to docs, unified naming (YAGNI/DRY), fixed-point achieved",
    "external_docs": {
      "principles": "docs/principles.md",
      "fresh_perspective_pattern": "docs/FRESH_PERSPECTIVE.md",
      "rationale": "JSON for enforcement, Markdown for understanding"
    }
  },

  "CRITICAL": {
    "banned_commands": {
      "exact": ["python","bash","powershell","sed","awk","tr","cut","head","tail","uniq","sort","wc","find","perl","sudo","grep","cat"],
      "rationale": "Use Read tool for file ops, ruby for logic, zsh for data manipulation"
    },
    "allowed_only": ["ruby","zsh","read_tool","edit_tool","write_tool","grep_tool","glob_tool"],
    "bash_tool_exceptions": {
      "allowed_patterns": ["git *", "npm *", "bundle *", "rails *", "rake *"],
      "rationale": "Bash tool ONLY for git and package managers, NEVER for file reading"
    },
    "thresholds": {
      "maximum_arguments": 3,
      "maximum_nesting_levels": 2,
      "maximum_method_lines": 20,
      "maximum_cyclomatic_complexity": 10,
      "duplication_threshold_percent": 70
    },
    "null": "forbidden_forever"
  },

  "ultra_minimalism": {
    "philosophy": "Vanilla first, frameworks last. Standards over custom. Delete faster than you add.",
    "forbidden": ["decorative_code", "premature_abstraction", "deep_nesting", "magic", "unnecessary_dependencies"],
    "required": ["vanilla_first", "explicit_over_implicit", "flat_over_nested", "boring_over_clever", "standards_over_custom"],
    "applies_to": {
      "html": "Semantic HTML5 only - no divs when semantic elements exist",
      "css": "Brutalist flat - no shadows/gradients/radius - modern layout (grid/flex/:has/subgrid)",
      "javascript": "ESNext vanilla - Web Components over React unless complexity demands it",
      "ruby": "Stdlib and Rails - avoid gems unless significant value",
      "rust": "Minimal deps - prefer std, zero-cost abstractions only"
    }
  },

  "principles": {
    "critical": {
      "rationale": "Veto power - violations block merge",
      "preserve_functionality": "Working code beats pretty code - never break existing functionality",
      "semantic_html_css": "Semantic HTML, minimal classes, element selectors first",
      "no_null": "Never return/accept null - use NullObject or Result pattern",
      "security": "No SQLi/XSS/CSRF/injection - sanitize all inputs"
    },
    "high": {
      "rationale": "Core quality - violations require justification",
      "dry": "Single source of truth - duplication >70% must be extracted",
      "kiss": "Simplest solution - prefer boring over clever",
      "yagni": "Delete unused code immediately - no speculation",
      "solid": "Single responsibility, depend on abstractions"
    },
    "medium": {
      "rationale": "Polish - violations are warnings",
      "strunk_white": "Omit needless words, vigorous English, definite/specific/concrete",
      "rails_doctrine": "Convention over configuration, beautiful code matters, integrated systems",
      "unix_philosophy": "Do one thing well, text streams, portability"
    },
    "meta": {
      "auto_upgrade": {"enabled": false, "note": "Manual upgrade only - review before replacing"},
      "fixed_point_convergence": "Silence is convergence proof - no violations in 2 consecutive runs"
    },
    "external_details": "docs/principles.md - comprehensive explanations and examples"
  },

  "operational_convergence": {
    "rationale": "Closed-loop iteration until fixed-point convergence",
    "pattern": "detect → question → generate → select → apply → verify → converge",
    "adversarial_questioning": {"questions_per_violation": 5, "require_deep_reasoning": true},
    "solution_generation": {"range": "5-15 solutions", "early_exit_on_quality": true},
    "prediction_engine": {
      "enabled": true,
      "confidence_threshold": 0.85,
      "auto_fix_when_confident": true,
      "detectors": {
        "duplicate_pattern": {"violation": "dry", "confidence": 0.85, "autofix": "extract_method"},
        "nesting_increase": {"violation": "kiss", "confidence": 0.92, "autofix": "extract_method"},
        "null_usage": {"violation": "no_null", "confidence": 0.95, "autofix": "null_object_pattern"},
        "excessive_parameters": {"threshold_reference": "CRITICAL.thresholds.maximum_arguments", "confidence": 0.88, "autofix": "parameter_object"},
        "abbreviation_detected": {"violation": "full_names", "confidence": 0.99, "autofix": "expand_abbreviation"}
      }
    },
    "incremental_scanning": {
      "enabled": true,
      "strategy": "Scan only modified files - 60-85% faster",
      "full_scan_triggers": ["new_principle_added", "master_json_modified", "user_requests_full_scan"]
    }
  },

  "enforcement": {
    "cli_environments": {
      "forbidden_bash_commands": ["wc", "head", "tail", "grep", "cat", "find", "sort", "uniq", "awk", "sed"],
      "use_read_tool_instead": {
        "wc_minus_l": "Read tool (count lines in result)",
        "head_tail": "Read tool with limit/offset parameters",
        "grep": "Read tool + search or Grep tool",
        "cat": "Read tool"
      },
      "rationale": "Read tool built for file ops with proper permissions - bash utilities are redundant"
    },
    "before_every_bash_invocation": "Verify command matches CRITICAL.bash_tool_exceptions.allowed_patterns",
    "on_principle_violation": [
      "Ask 5 deep adversarial questions",
      "Generate 5-15 solution alternatives",
      "Select best with evidence",
      "Apply fix immediately",
      "Verify violation gone",
      "Repeat until convergence"
    ]
  },

  "tech_stack": {
    "rationale": "Reference industry standards - don't duplicate them",
    "rails": {
      "version": "8.0+",
      "stack": "solid_queue, solid_cache, solid_cable, propshaft, falcon",
      "style_guide": "https://rubystyle.guide + .rubocop.yml",
      "conventions": "Thin controllers, fat models or service objects, RESTful routes max 2 nesting"
    },
    "javascript": {
      "version": "ES2024+",
      "reference": "https://standardjs.com or eslint:recommended",
      "prefer": "Vanilla → Svelte/Preact/Lit → Avoid React (70kb runtime)"
    },
    "typescript": {
      "version": "5.0+",
      "when_to_use": "Projects >1000 lines, teams >1 person, complex data structures",
      "prefer_jsdoc_for_small_projects": true
    },
    "rust": {
      "version": "stable 2021",
      "dependencies": "std only - allowed: serde, tokio, clap",
      "reference": "https://doc.rust-lang.org/rustfmt"
    },
    "html_css": {
      "html": "Semantic HTML5 elements only",
      "css": "Brutalist flat - forbidden: shadows, gradients, border-radius",
      "modern_features": "grid, flex, :has(), subgrid, container-queries"
    },
    "openbsd": {
      "version": "7.6+",
      "security": "pledge/unveil everywhere, doas not sudo",
      "services": "nsd, relayd, httpd, acme-client, pf"
    }
  },

  "constants": {
    "rationale": "Single source of truth for magic numbers - see docs/principles.md for detailed rationale",
    "typography": {"line_length_ideal": 66, "line_height_body": [1.4, 1.6], "base_unit": 8},
    "performance": {"lcp_seconds": 2.5, "inp_milliseconds": 200, "cls": 0.1},
    "accessibility": {"minimum_contrast_ratio": 4.5, "minimum_touch_target_pixels": 24, "standard": "WCAG_AA"},
    "colors": {"source": "Twitter color system"}
  },

  "permissions": {
    "mode": "auto_accept",
    "bypass_confirmation": true,
    "trust_level": "full",
    "rationale": "User requested permission bypass"
  },

  "deployment_config": {
    "note": "USER-SPECIFIC - Replace with your own infrastructure",
    "domains": {
      "brgen": "brgen.no",
      "amber": "amber.brgen.no",
      "bsdports": ["bsdports.org", "bsdports.net"]
    },
    "vps": {
      "host": "185.52.176.18",
      "user": "dev",
      "app_dir": "/home/brgen/app",
      "services": "postgresql redis relayd nsd httpd pf"
    },
    "github": {
      "repo": "https://github.com/anon987654321/pub4.git",
      "user": "anon987654321",
      "pat_location": "G:/priv/accounts.txt"
    }
  }
}
