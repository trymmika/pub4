# GENERATED FILE - DO NOT EDIT
# This file has been auto-generated by the governance system
# Manual edits will be rejected. Update the source templates instead.

meta:
  name: quality_governance_system
  version: "17.0.0"
  updated: "2026-01-22"
  style: lowercase_underscored_plain_english
  
  constants:
    max_function_lines: 20
    max_class_lines: 300
    max_complexity: 10
    max_parameters: 3
    max_nesting: 3
    min_coverage: 80
    comment_ratio_max: 0.10
    
    default_model: "deepseek/deepseek-r1"
    config_file_permissions: "0600"
    
    violation_severities:
      critical: 10
      high: 7
      medium: 5
      low: 3
      info: 1
  
  calculate_weights:
    purpose: "Prioritize decisions using weighted scoring of multiple factors"
    
    algorithm:
      name: "weighted_sum_with_thresholds"
      formula: "score = sum(factor_value * factor_weight)"
      threshold_check: "score >= minimum_acceptable_score"
    
    factors:
      speed:
        weight: 0.30
        rationale: "Fast implementation and execution"
        scale: 1_to_10
      
      safety:
        weight: 0.40
        rationale: "Low risk of bugs or security issues"
        scale: 1_to_10
      
      maintainability:
        weight: 0.20
        rationale: "Easy to understand and modify"
        scale: 1_to_10
      
      aesthetics:
        weight: 0.10
        rationale: "Code elegance and UX quality"
        scale: 1_to_10
    
    usage_example: |
      Option A: Cached database query
        speed: 9 * 0.30 = 2.7
        safety: 7 * 0.40 = 2.8
        maintainability: 8 * 0.20 = 1.6
        aesthetics: 6 * 0.10 = 0.6
        total: 7.7
      
      Option B: Direct database query
        speed: 5 * 0.30 = 1.5
        safety: 10 * 0.40 = 4.0
        maintainability: 9 * 0.20 = 1.8
        aesthetics: 8 * 0.10 = 0.8
        total: 8.1
      
      Decision: Choose Option B (higher total score)
    
    customization:
      adjust_weights: "Modify weights based on project priorities"
      add_factors: "Include project-specific concerns"
      change_scale: "Use different scoring ranges if needed"
  
  authorities:
    primary: this_file
    supplementary:
      - robert_c_martin_clean_code
      - martin_fowler_refactoring
      - elements_of_style_strunk_white
  
  platform:
    target: openbsd
    fallback: posix_compatible
    toolchain:
      - ruby
      - zsh
      - doas
  
  for_llms:
    on_load: emit_boot_sequence
    boot_sequence:
      style: terse_unix
      model: openbsd_bootup
      emit: all_sections_with_key_rules
      format: "[ ok ] section_name\\n       key=value key=value"
      example: |
        [ ok ] style_constraints
               case=lowercase separator=underscores enforcement=blocking
        [ ok ] security
               api_keys=env_only secrets_detection=abort pledge_unveil=enabled
        [ ok ] linting
               ruby=rubocop yaml=yamllint zsh=shellcheck
    before_editing: read_all_rules_first
    before_adding: verify_matches_existing_style
    before_committing: run_self_validation
    
    autonomy:
      default_mode: self_guided
      ask_only_when:
        - ambiguous_requirements
        - destructive_operations_on_production
        - security_credential_decisions
        - architecture_changing_decisions
      proceed_without_asking:
        - standard_rails_app_generation
        - file_consolidation_per_sprawl_rules
        - syntax_fixes
        - dependency_installation
        - test_runs
        - linting_and_formatting
      flow_patterns:
        - read_then_act
        - fix_then_verify
        - consolidate_then_validate
      on_error: retry_with_alternative_then_report
      
      examples:
        self_guided_flow: |
          1. Read master.yml and understand governance rules
          2. Scan codebase for violations
          3. Fix violations automatically where safe
          4. Run tests to verify fixes
          5. Report results with metrics
        
        ask_for_guidance: |
          User: "Should I migrate to a new authentication system?"
          LLM: "This is an architecture-changing decision. Let me analyze:
                - Current: Session-based auth
                - Proposed: JWT tokens
                - Impact: All API endpoints, mobile apps, frontend
                Recommendation: I need your decision on this."
    
    on_uncertainty: ask_do_not_assume
    
    chat_codification:
      purpose: "Preserve insights from LLM conversations into governance"
      trigger: "After meaningful architectural or pattern discussions"
      process:
        - identify_reusable_pattern
        - extract_principle_or_rule
        - propose_addition_to_master_yml
        - document_rationale_and_examples
        - submit_via_pull_request
      examples:
        from_discussion: |
          Conversation:
          User: "Why do we prefer composition over inheritance?"
          LLM: "Because inheritance creates tight coupling..."
          
          Codification:
          Add to axioms:
            composition_over_inheritance:
              statement: "Favor object composition over class inheritance"
              implication: "Prefer 'has-a' over 'is-a' relationships"
              rationale: "Reduces coupling, increases flexibility"
              source: "Gang of Four, Design Patterns"
  
  for_humans:
    philosophy: plain_english_over_jargon
    rationale: llms_parse_better_humans_read_easier
    contribution: modify_via_pull_request_only

style_constraints:
  case: lowercase_only
  separator: underscores
  language: plain_english
  
  filenames:
    style: lowercase_underscored
    extension_exceptions:
      - README.md
      - LICENSE
      - CHANGELOG.md
      - Gemfile
      - Rakefile
      - test_cli.rb
    pattern: /^[a-z][a-z0-9_]*(\.[a-z]+)?$/
  
  yaml_keys:
    style: lowercase_underscored
    pattern: /^[a-z][a-z0-9_]*$/
  
  code_in_yaml:
    zsh_patterns: literal_allowed
    regex_patterns: literal_allowed
  
  enforcement:
    on_violation: reject_and_reformat
    automated: true
    blocking: true

comment_policy:
  allowed_styles:
    - sentence_case_with_period
    - uppercase_acronyms_inline
    - header_comments_for_sections
  
  requirements:
    ratio: under_ten_percent
    content: why_not_what
    placement: above_relevant_code
  
  enforcement:
    on_violation: reject_and_reformat

documentation_requirements:
  yard_style:
    required: true
    applies_to:
      - public_methods
      - classes
      - modules
      - complex_private_methods
    
    required_tags:
      - tag: "@param"
        format: "@param name [Type] description"
      - tag: "@return"
        format: "@return [Type] description"
      - tag: "@raise"
        when: method_raises_exceptions
      - tag: "@example"
        when: usage_non_obvious
      - tag: "@yield"
        when: method_accepts_block
      - tag: "@yieldparam"
        when: block_has_parameters
      - tag: "@yieldreturn"
        when: block_returns_value
    
  readme_requirements:
    required_sections:
      - purpose
      - installation
      - usage
      - configuration
      - contributing
      - testing
      - security
  
  enforcement:
    on_violation: abort_merge
    automated: true

schema_governance:
  single_source_of_truth:
    governance: master.yml
    validation: master_schema.json
  
  generated_files:
    regeneration: on_source_change
    marker: "# GENERATED FILE - DO NOT EDIT"
  
  version_sync:
    source: meta.version
    propagation: all_files_must_reference
    check: automated_pre_commit
  
  enforcement:
    on_violation: abort_merge
    on_manual_edit_of_generated: reject

execution_truth:
  requirements:
    every_function: must_be_callable
    every_parameter: must_be_used
    every_return: must_be_accurate
    every_example: must_be_runnable
  
  verification:
    method_exists: required
    params_mapped: required
    return_type_matches: required
    side_effects_documented: required
  
  backend:
    allowed:
      - ruby
      - zsh
      - doas
    rationale: consistency_and_security
  
  failure_response: fatal_with_explanation

security:
  api_keys:
    storage: environment_variables_only
    pattern:
      name: SERVICENAME_API_KEY
      access: "ENV.fetch('KEY') { abort 'Set KEY' }"
  
  secrets_detection:
    patterns:
      - /sk-[a-zA-Z0-9]{32,}/
      - /ghp_[a-zA-Z0-9]{36}/
      - /-----BEGIN.*PRIVATE KEY-----/
    on_detection: abort_commit
  
  pledge_unveil:
    platform: openbsd
    order: unveil_then_pledge
    
    unveil_paths:
      sandbox:
        - cwd
        - tmp
      user:
        - home
        - cwd
        - tmp
      admin:
        - home
        - tmp
        - usr_local
        - etc
        - var
    
    pledge_promises:
      minimal:
        - stdio
        - rpath
      standard:
        - stdio
        - rpath
        - wpath
        - cpath
        - inet
        - dns
        - tty
      full:
        - stdio
        - rpath
        - wpath
        - cpath
        - inet
        - dns
        - tty
        - proc
        - exec
  
  input_validation:
    user_input: always_sanitize
    file_paths: enforce_sandbox
    shell_commands: allowlist_only
  
  enforcement:
    on_violation: fatal
    audit_log: required

linting:
  ruby:
    tool: rubocop
    config: .rubocop.yml
    autocorrect: safe_only
    
    custom_rules:
      method_length: 20
      class_length: 300
      cyclomatic_complexity: 10
      parameter_count: 3
    
    examples:
      violation: |
        def process_order(user, product, quantity, coupon, shipping, gift_wrap, notes)
          # Too many parameters (7 > 3)
        end
      
      fix: |
        def process_order(order_params)
          # Single parameter encapsulating all order data
          user = order_params[:user]
          product = order_params[:product]
          # ...
        end
      
      running: |
        # Check code
        rubocop path/to/file.rb
        
        # Auto-fix safe issues
        rubocop -a path/to/file.rb
        
        # Check entire project
        rubocop
  
  yaml:
    tool: yamllint
    rules:
      indentation: 2_spaces
      line_length: 120
      trailing_spaces: none
      empty_lines_max: 1
    
    examples:
      violation: |
        key:   value    # trailing spaces
          nested:value  # inconsistent indentation
      
      fix: |
        key: value
          nested: value
      
      running: |
        yamllint path/to/file.yml
        yamllint -c .yamllint.yml .
  
  zsh:
    tool: shellcheck
    dialect: zsh
    rules:
      set_options:
        - e
        - u
        - o_pipefail
      quoting: required
      globbing: explicit
    
    examples:
      violation: |
        #!/bin/zsh
        # Missing set options
        # Unquoted variable
        echo $USER_INPUT
      
      fix: |
        #!/usr/bin/env zsh
        set -euo pipefail
        
        # Quoted to prevent word splitting
        echo "$USER_INPUT"
      
      running: |
        shellcheck script.sh
        shellcheck -s zsh script.sh
  
  symbols:
    spaced_before_colon: false
    example: "key: value"
  
  enforcement:
    pre_commit: required
    ci_pipeline: required
    on_violation: auto_reject

version_governance:
  format: semantic_versioning
  pattern: /^\d+\.\d+\.\d+$/
  
  source_of_truth: meta.version
  
  propagation:
    required_files:
      - cli.rb
      - test_cli.rb
      - package.json
      - gemspec
    method: automated_sync
  
  changelog:
    required: true
    format: keep_a_changelog
    location: CHANGELOG.md
  
  git_tags:
    format: "v{version}"
    signed: required
    annotated: required
  
  increment_rules:
    major: breaking_changes
    minor: new_features
    patch: bug_fixes_and_docs

json_export:
  purpose: "Enable machine-readable export of governance rules and metrics"
  
  export_command:
    tool: ruby
    script: "./cli.rb export --format json"
    output: governance_export.json
  
  exportable_sections:
    - meta
    - style_constraints
    - rules
    - axioms
    - thresholds
    - testing
    - security
    - defect_catalog
  
  export_format:
    version: "1.0"
    schema:
      type: object
      required:
        - export_metadata
        - governance_version
        - sections
      properties:
        export_metadata:
          timestamp: iso8601
          exporter_version: semver
          format_version: semver
        governance_version: string
        sections: object
  
  use_cases:
    ci_integration: "Import rules into CI/CD pipeline validators"
    documentation_generation: "Generate HTML/Markdown docs from JSON"
    metrics_dashboard: "Feed governance compliance metrics to dashboards"
    cross_project_analysis: "Compare governance rules across projects"
    llm_context_injection: "Provide structured governance to LLM assistants"
  
  examples:
    basic_export: |
      {
        "export_metadata": {
          "timestamp": "2026-01-27T23:48:00Z",
          "exporter_version": "17.1.0",
          "format_version": "1.0"
        },
        "governance_version": "17.0.0",
        "sections": {
          "meta": {...},
          "rules": {...}
        }
      }

migration_logic:
  purpose: "Manage breaking changes and version upgrades in governance schema"
  
  migration_strategy:
    approach: forward_only
    storage: .migrations/
    naming: "YYYYMMDDHHMMSS_description.rb"
    execution: sequential_by_timestamp
  
  version_compatibility:
    current: "17.0.0"
    minimum_supported: "16.0.0"
    deprecation_policy: "2 major versions backward"
  
  migration_types:
    schema_changes:
      description: "Changes to master.yml structure"
      requires: migration_script
      example: "Adding new top-level section"
    
    rule_additions:
      description: "New rules added to existing sections"
      requires: documentation_only
      example: "Adding new linting rule"
    
    rule_removals:
      description: "Deprecating or removing existing rules"
      requires: deprecation_warning
      grace_period: one_major_version
    
    threshold_changes:
      description: "Changes to numeric thresholds"
      requires: impact_analysis
      example: "Reducing function_length_lines from 20 to 15"
  
  migration_procedure:
    steps:
      - read_current_version_from_meta
      - identify_required_migrations
      - validate_migration_chain_completeness
      - backup_current_state
      - execute_migrations_sequentially
      - update_version_in_meta
      - run_validation_suite
      - commit_if_successful_rollback_if_failed
  
  rollback_capability:
    enabled: true
    method: git_revert_or_restore_backup
    validation: run_tests_after_rollback
  
  migration_examples:
    v16_to_v17:
      changes:
        - "Added cognitive_reasoning section"
        - "Added epistemic_humility section"
        - "Added recursive_governance section"
        - "Renamed comment_policy.ratio to comment_policy.requirements.ratio"
      migration_steps:
        - "Add new sections with default values"
        - "Rename nested keys with path preservation"
        - "Validate against new schema"
      breaking_changes: "Keys moved to nested paths require update in consuming code"
    
    v17_to_v18_hypothetical:
      changes:
        - "Split rules into separate files"
        - "Introduce plugin system"
      migration_steps:
        - "Extract rules sections to rules/*.yml"
        - "Update references to use import syntax"
        - "Add plugin manifest"
      breaking_changes: "Consumers must support multi-file governance"

platform_governance:
  primary: openbsd
  compatible:
    - freebsd
    - linux
    - macos
  
  shell:
    required: zsh
    shebang: "#!/usr/bin/env zsh"
    options:
      - e
      - u
      - o_pipefail
  
  privilege_escalation:
    allowed: doas
  
  paths:
    style: unix
  
  packages:
    ruby: system_ruby_or_rbenv
  
rules:
  authorities:
    - robert_c_martin_clean_code
    - martin_fowler_refactoring
    - elements_of_style_strunk_white
  
  principles:
    - do_one_thing
    - one_level_of_abstraction
    - few_arguments
    - intention_revealing_names
    - pronounceable_names
    - searchable_names
    - one_word_per_concept
    - exceptions_over_error_codes
    - specific_exception_types
    - context_in_error_messages
    - content_over_decoration
    - why_not_what
    - plain_english_over_jargon
  
  verbose_principles:
    do_one_thing:
      description: "Functions should do one thing, do it well, and do it only"
      rationale: "Single responsibility makes code easier to name, test, and reuse"
      violation_example: "A save_user() function that validates, saves, sends email, and logs"
      correct_example: "Separate functions: validate_user(), save_user(), send_welcome_email(), log_action()"
    
    one_level_of_abstraction:
      description: "All statements in a function should operate at the same level of abstraction"
      rationale: "Mixing high-level concepts with low-level details confuses readers"
      violation_example: "Function mixing HTTP parsing with business logic and SQL queries"
      correct_example: "Separate layers: parse_request(), apply_business_rules(), persist_to_database()"
    
    few_arguments:
      description: "Functions should have no more than 3 arguments; prefer 0-2"
      rationale: "More arguments increase cognitive load and testing complexity exponentially"
      violation_example: "create_user(name, email, password, role, department, manager, status)"
      correct_example: "create_user(user_params) where user_params is a structured object"
    
    intention_revealing_names:
      description: "Names should reveal intent without requiring comments or context"
      rationale: "Code is read far more often than written; clarity reduces cognitive overhead"
      violation_example: "d = 86400  # seconds in day"
      correct_example: "seconds_per_day = 86400"
    
    pronounceable_names:
      description: "Use names that can be spoken aloud in conversation"
      rationale: "Enables effective verbal communication about code"
      violation_example: "genymdhms (generation timestamp year month day hour minute second)"
      correct_example: "generation_timestamp"
    
    searchable_names:
      description: "Avoid single-letter names except for loop counters in tiny scopes"
      rationale: "Enables effective code search and navigation"
      violation_example: "e = calculate_energy()"
      correct_example: "total_energy = calculate_energy()"
    
    one_word_per_concept:
      description: "Pick one word for each abstract concept and stick with it"
      rationale: "Consistency reduces mental mapping overhead"
      violation_example: "fetch_user(), retrieve_account(), get_customer() all meaning the same thing"
      correct_example: "get_user(), get_account(), get_customer() (consistent verb)"
    
    exceptions_over_error_codes:
      description: "Use exceptions for error conditions, not return codes or flags"
      rationale: "Exceptions separate error handling from happy path logic"
      violation_example: "result = save(); if result == -1 then handle_error()"
      correct_example: "begin save(); rescue SaveError => e then handle_error(e)"
    
    content_over_decoration:
      description: "Emphasize actual information over visual decoration"
      rationale: "Decoration adds noise without semantic value"
      violation_example: "# ========== USER MANAGEMENT =========="
      correct_example: "# User management or simply use good function names"
  
  thresholds:
    function_length_lines: 20
    class_length_lines: 300
    cyclomatic_complexity: 10
    parameter_count: 3
    nesting_depth: 3
    comment_ratio: under_ten_percent
  
  naming_patterns:
    boolean_methods: "is_*, has_*, can_*, should_*"
    predicate_methods: "valid?, empty?, present?"
    bang_methods: "save!, create!, update!"
  
  smells:
    - commented_out_code
    - todo_without_issue_link
    - obvious_explanations
    - empty_descriptions
    - copy_paste_from_method_name
    - side_effects_without_documentation
    - output_arguments
    - flag_arguments
    - mixed_case_words
    - hyphen_separators
    - all_uppercase_except_constants
    - plaintext_secrets
  
  anti_patterns:
    - fictional_operations
    - stubbed_logic
    - placeholder_implementations
    - horizontal_rule_decorators
    - emoji_headers
    - bracket_decorators

axioms:
  foundational_truths:
    code_is_read_more_than_written:
      statement: "Code is read 10x more often than it is written"
      implication: "Optimize for readability over writeability"
      source: "Robert C. Martin, Clean Code"
    
    premature_optimization_is_evil:
      statement: "Premature optimization is the root of all evil"
      implication: "Make it work, make it right, then make it fast"
      source: "Donald Knuth"
    
    simple_is_better_than_complex:
      statement: "Simple is better than complex; complex is better than complicated"
      implication: "Favor straightforward solutions over clever ones"
      source: "Zen of Python, PEP 20"
    
    duplication_is_evil:
      statement: "Don't Repeat Yourself (DRY)"
      implication: "Every piece of knowledge should have a single, unambiguous representation"
      source: "Andy Hunt and Dave Thomas, The Pragmatic Programmer"
    
    fail_fast:
      statement: "Fail fast and fail loudly"
      implication: "Detect and report errors at the earliest possible point"
      source: "Jim Shore"
    
    convention_over_configuration:
      statement: "Convention over configuration"
      implication: "Reduce decisions by adopting sensible defaults"
      source: "Ruby on Rails philosophy"
    
    separation_of_concerns:
      statement: "Different concerns should be addressed in different parts of the system"
      implication: "Each module should have one reason to change"
      source: "Edsger Dijkstra"
    
    law_of_demeter:
      statement: "Only talk to your immediate friends"
      implication: "object.friend.method() is acceptable; object.friend.friend.method() is not"
      source: "Lieberherr and Holland"
    
    yagni:
      statement: "You Aren't Gonna Need It"
      implication: "Don't add functionality until it's necessary"
      source: "Extreme Programming"
    
    principle_of_least_astonishment:
      statement: "Behavior should match expectations"
      implication: "Don't surprise users or other developers"
      source: "General software engineering wisdom"

defect_catalog:
  purpose: "Common defects, their symptoms, root causes, and fixes"
  
  memory_leaks:
    symptoms:
      - "Growing memory usage over time"
      - "Eventually crashes with out of memory errors"
      - "Slow degradation of performance"
    root_causes:
      - "Unclosed file handles or database connections"
      - "Event listeners not removed"
      - "Circular references in object graphs"
      - "Caching without eviction policy"
    detection:
      - "Memory profilers (e.g., Ruby's memory_profiler gem)"
      - "Monitor heap size over time"
      - "Use tools like valgrind or heaptrack"
    fixes:
      - "Explicitly close resources in ensure blocks"
      - "Use weak references for caches"
      - "Implement proper cleanup in destructors"
      - "Set up periodic garbage collection"
  
  race_conditions:
    symptoms:
      - "Intermittent failures that disappear when debugging"
      - "Different results on different runs with same input"
      - "Data corruption or inconsistent state"
    root_causes:
      - "Shared mutable state without synchronization"
      - "Check-then-act sequences without atomicity"
      - "Multiple threads accessing same resource"
    detection:
      - "Thread sanitizers (e.g., ThreadSanitizer)"
      - "Stress testing with high concurrency"
      - "Code review for shared state access patterns"
    fixes:
      - "Use mutexes or locks around critical sections"
      - "Prefer immutable data structures"
      - "Use atomic operations or transactions"
      - "Apply message passing instead of shared memory"
  
  sql_injection:
    symptoms:
      - "Unauthorized data access"
      - "Data corruption or deletion"
      - "Security audit failures"
    root_causes:
      - "Concatenating user input into SQL queries"
      - "Not using parameterized queries"
      - "Insufficient input validation"
    detection:
      - "Static analysis tools (e.g., Brakeman for Rails)"
      - "Security scanning tools"
      - "Code review of database query construction"
    fixes:
      - "Always use parameterized queries or prepared statements"
      - "Use ORM query builders instead of raw SQL"
      - "Validate and sanitize all user inputs"
      - "Apply principle of least privilege for database access"
  
  null_pointer_exceptions:
    symptoms:
      - "Runtime crashes with null/nil errors"
      - "Unexpected program termination"
    root_causes:
      - "Not checking for nil before accessing methods or properties"
      - "Uninitialized variables"
      - "Methods returning nil unexpectedly"
    detection:
      - "Static type checkers (e.g., Sorbet for Ruby)"
      - "Linters with null safety rules"
      - "Runtime error monitoring"
    fixes:
      - "Use safe navigation operators (e.g., &. in Ruby)"
      - "Implement nil checks before access"
      - "Return null objects or default values instead of nil"
      - "Use optional types in languages that support them"
  
  off_by_one_errors:
    symptoms:
      - "Array index out of bounds errors"
      - "Loops that execute one too few or too many times"
      - "Incorrect range calculations"
    root_causes:
      - "Confusion between 0-based and 1-based indexing"
      - "Incorrect loop conditions (< vs <=)"
      - "Fence-post errors in range calculations"
    detection:
      - "Unit tests with boundary conditions"
      - "Code review focusing on loop bounds"
      - "Fuzz testing with edge cases"
    fixes:
      - "Use inclusive ranges (0..n) consistently"
      - "Test with minimum, maximum, and empty collections"
      - "Use language idioms like .each instead of manual indexing"
      - "Write explicit tests for boundary conditions"
  
  resource_exhaustion:
    symptoms:
      - "Running out of file descriptors"
      - "Database connection pool exhaustion"
      - "Too many open sockets"
    root_causes:
      - "Not closing resources after use"
      - "Unbounded growth of resource consumption"
      - "Missing connection pooling or limiting"
    detection:
      - "Resource monitoring tools"
      - "Load testing under sustained load"
      - "System metrics (open files, connections, etc.)"
    fixes:
      - "Use connection pooling with limits"
      - "Implement resource cleanup in ensure/finally blocks"
      - "Set timeouts on long-running operations"
      - "Use circuit breakers for external services"

testing:
  requirements:
    coverage_minimum: 80
    new_code_coverage: 100
    test_files_required: true
    test_naming_convention: required
  
  principles:
    fast: milliseconds_per_test
    independent: no_test_order_dependency
    repeatable: same_result_every_run
    self_validating: boolean_pass_fail
    timely: written_with_or_before_code
  
  structure:
    unit: isolated_single_component
    integration: component_interactions
    system: end_to_end_flows
  
  naming:
    pattern: "test_[method]_[scenario]_[expected]"
    example: "test_login_with_invalid_password_returns_error"
  
  enforcement:
    on_missing_tests: abort_merge
    on_coverage_below_minimum: reject_merge

cognitive_reasoning:
  meta_cognition:
    enabled: true
    
    self_observation:
      track_reasoning_patterns: true
      track_failure_modes: true
      track_assumptions: true
      track_confidence_accuracy: true
      storage: session_memory
    
    self_questioning:
      before_each_decision:
        - why_this_conclusion
        - what_would_change_mind
        - what_am_i_assuming
        - is_this_the_right_question
        - what_am_i_missing
    
    belief_revision:
      trigger: evidence_contradicts_belief
      process:
        - quantify_prior_confidence
        - quantify_new_evidence_strength
        - apply_bayesian_update
        - propagate_to_dependent_beliefs
  
  causal_reasoning:
    mandatory_for:
      - debugging
      - design
      - prediction
      - root_cause_analysis
    
    model_building:
      steps:
        - identify_all_variables
        - hypothesize_causal_links
        - distinguish_correlation_from_causation
        - build_directed_acyclic_graph
        - identify_confounders
    
    counterfactual_analysis:
      template: "if X had been different, would Y have changed?"
      applications:
        - root_cause_identification
        - intervention_planning
        - responsibility_assignment
  
  analogical_reasoning:
    purpose: transfer_insights_across_domains
    
    structure_mapping:
      process:
        - abstract_relations_from_source_domain
        - find_targets_with_similar_relational_structure
        - map_elements_preserving_relations
        - import_inferences_from_source_to_target
        - validate_transferred_inferences
    
    quality_criteria:
      structural_depth: prefer_deep_relations_over_surface_features
      systematicity: prefer_interconnected_relation_systems
      pragmatic_centrality: prefer_goal_relevant_mappings
  
  uncertainty:
    types:
      aleatoric:
        definition: irreducible_randomness
        response: model_distribution
      epistemic:
        definition: reducible_through_information
        response: gather_more_data
      model:
        definition: wrong_assumptions_or_structure
        response: question_framework
    
    calibration:
      requirement: stated_confidence_must_match_accuracy
      tracking:
        method: log_predictions_with_confidence
        review: periodic_calibration_assessment
      adjustment: recalibrate_when_over_or_under_confident
    
    unknown_unknowns:
      indicators:
        - novel_domain_without_prior_experience
        - question_assumes_facts_not_verified
        - contradictory_expert_sources
        - rapid_domain_evolution
      response:
        - flag_explicitly
        - widen_confidence_intervals
        - seek_diverse_information_sources
    
    maximum_confidence: 0.95
    rationale: always_leave_room_for_unknown_unknowns
  
  goal_decomposition:
    input: vague_high_level_goal
    output: concrete_actionable_subgoals
    
    process:
      - clarify_success_criteria_with_user
      - identify_necessary_preconditions
      - decompose_into_independent_subgoals
      - identify_dependencies_between_subgoals
      - estimate_effort_and_risk_per_subgoal
      - prioritize_by_value_over_cost_ratio
    
    subgoal_properties:
      measurable: clear_binary_completion_criteria
      achievable: within_current_capability
      independent: minimal_coupling_to_other_subgoals
      reversible: can_undo_if_wrong_direction
      time_bounded: estimated_duration
    
    dynamic_replanning:
      triggers:
        - subgoal_harder_than_estimated
        - new_information_changes_priorities
        - dependency_fails_or_blocked
        - user_changes_requirements
      response: redecompose_from_current_state

epistemic_humility:
  philosophy: actively_seek_disconfirmation
  
  steel_manning:
    requirement: state_opposing_view_in_strongest_possible_form
    verification: proponent_would_recognize_as_fair_representation
  
  disconfirmation_seeking:
    mandate: actively_search_for_contradicting_evidence
    weight: disconfirming_evidence_weighted_2x_confirming
    process:
      - identify_prediction_from_belief
      - seek_cases_where_prediction_fails
      - update_belief_based_on_failures
  
  intellectual_honesty:
    requirements:
      - distinguish_dont_know_from_unknowable
      - distinguish_unlikely_from_impossible
      - distinguish_belief_from_established_fact
      - credit_sources_of_ideas
      - acknowledge_limitations
  
  rule_exceptions:
    when_to_suspend_rules:
      - emergency_hotfix_with_post_hoc_cleanup
      - third_party_code_integration
      - proven_conflict_with_project_goals
    process: document_exception_with_rationale

contradiction_detection:
  scope: entire_belief_and_rule_system
  
  types:
    direct:
      pattern: "A and not-A"
      example: "require X and forbid X"
      severity: critical
    pragmatic:
      pattern: "rule X makes rule Y impossible"
      example: "all lowercase vs preserve proper nouns"
      severity: high
    temporal:
      pattern: "state requires impossible history"
      example: "file modified before creation"
      severity: medium
  
  checking:
    on_belief_addition: check_against_all_existing
    on_rule_addition: check_against_all_existing
    periodic: full_consistency_scan
    frequency: every_major_version
  
  resolution:
    priority: newer_evidence_updates_older_belief
    process:
      - identify_exact_contradiction
      - trace_provenance_of_both_sides
      - evaluate_evidence_strength
      - resolve_or_flag_for_human

self_improvement:
  philosophy: bounded_modification_with_safety_rails
  
  observation_targets:
    - rules_frequently_violated
    - rules_that_conflict_in_practice
    - rules_never_triggered
    - consistent_reasoning_failures
    - user_friction_points
  
  proposal_format:
    required_fields:
      - current_rule
      - observed_problem
      - proposed_modification
      - expected_improvement
      - potential_risks
      - rollback_plan
      - evidence
  
  approval:
    required: human_approval_for_all_modifications
    method: pull_request_with_review
    minimum_reviewers: 1

temporal_coherence:
  purpose: maintain_consistent_plans_across_sessions
  
  long_term_memory:
    store:
      - active_commitments
      - in_progress_plans
      - beliefs_with_supporting_evidence
      - learned_patterns_and_preferences
    
    format:
      storage: yaml_files_in_sessions_directory
      structure:
        commitments: list_with_deadlines
        plans: hierarchical_with_status
        beliefs: statements_with_confidence
    
    retrieval:
      trigger: context_keywords
      ranking: relevance_and_recency
  
  plan_continuity:
    on_session_start:
      - retrieve_active_plans
      - verify_current_state_matches_expected
      - resume_or_replan_as_needed
    
    on_session_end:
      - persist_plan_state
      - note_next_actions
      - flag_blockers
  
  belief_persistence:
    default: persist_until_contradicted
    decay: confidence_decreases_without_reinforcement
    reinforcement: evidence_resets_decay

emergence_detection:
  purpose: notice_when_simple_rules_create_complex_behavior
  
  observation_targets:
    - unexpected_output_patterns
    - behaviors_not_explicitly_programmed
    - synergies_between_rules
    - feedback_loops
  
  response:
    beneficial_emergence:
      - document_pattern
      - preserve_conditions
      - study_mechanism
    harmful_emergence:
      - trace_contributing_rules
      - add_constraints
      - prevent_recurrence
  
  monitoring:
    metric: output_complexity_vs_input_complexity
    threshold: complexity_ratio_exceeds_3x
    action: flag_for_analysis

recursive_governance:
  enabled: true
  version_introduced: 17.1.0
  
  traversal:
    root_folders:
      - openbsd
      - rails
      - media
    include_patterns:
      - "**/*.rb"
      - "**/*.sh"
      - "**/*.yml"
      - "**/*.yaml"
      - "**/*.md"
      - "**/*.js"
      - "**/*.css"
      - "**/*.json"
    exclude_patterns:
      - "**/*.{wav,mp4,mp3,jpg,jpeg,png,webp,gif,aif,sf2,zip,pdf,woff,woff2}"
      - "**/node_modules/**"
      - "**/.git/**"
      - "**/__pycache__/**"
  
  line_completeness:
    atomic:
      definition: line_is_syntactically_valid_and_meaningful_in_isolation
      checks:
        - no_dangling_references
        - no_undefined_variables_at_use
        - no_incomplete_statements
        - no_orphan_comments
        - no_trailing_whitespace
      exceptions:
        - multiline_strings
        - heredocs
        - continuation_lines
    holistic:
      definition: line_contributes_to_file_purpose
      checks:
        - aligns_with_file_header_intent
        - no_dead_code
        - no_unreachable_logic
        - supports_documented_api
        - connects_to_adjacent_context
      verification: static_analysis_plus_human_review
  
  consolidation:
    sprawl_threshold: 3
    common_knowledge_rule: single_source_of_truth
    duplicate_detection: enabled
    
    targets:
      media_docs:
        pattern: "media/__docs/*.md"
        consolidate_to: "media/README.md"
        strategy: merge_with_sections
      brgen_scripts:
        pattern: "rails/brgen/brgen_*.sh"
        consolidate_to: "rails/brgen/brgen.sh"
        strategy: subcommands
      repligen_helpers:
        pattern: "media/repligen/*_*.rb"
        consolidate_to: "media/repligen/repligen.rb"
        strategy: methods
    
    on_sprawl_detected: warn_and_suggest_consolidation

extreme_mode:
  enabled: false
  activation: manual_or_ci_flag
  
  strict_line_rules:
    max_line_length: 100
    blank_line_ratio: under_5_percent
    comment_must_add_value: true
    no_trailing_whitespace: fatal
  
  file_size_limits:
    max_lines: 500
    max_bytes: 20480
    on_violation: split_or_refactor
  
  single_responsibility:
    one_purpose_per_file: required
    max_function_lines: 25
  
  dependency_rules:
    max_imports: 10
    no_circular_references: fatal

meta_exceptions:
  style_reference_paradox:
    rule: banned_style_names_may_appear_in_banned_styles_section
    rationale: must_name_the_thing_to_ban_the_thing
    scope: style_constraints.banned_styles_only
  
  proper_nouns:
    allowed:
      - personal_names_in_credits
      - tool_names_like_rails_ruby_zsh
      - acronyms_like_api_html_css
    rationale: preserve_recognizability
    display: lowercase_in_yaml_keys
  
  external_integration:
    rule: third_party_conventions_may_override
    examples:
      - gemfile_uses_gem_naming
      - package_json_uses_npm_conventions
    scope: integration_files_only
  
  emergency_override:
    rule: rules_may_be_suspended_for_critical_fixes
    requirements:
      - documented_justification
      - issue_link
      - cleanup_deadline
      - reviewer_approval
  
  ruby_language_conventions:
    rule: ruby_class_names_must_use_pascal_case_constants_must_use_screaming_case
    rationale: ruby_syntax_requires_these_conventions
    scope: ruby_code_only
    exceptions:
      - class_names: PascalCase
      - constants: SCREAMING_CASE
    display: documented_in_rule_exceptions
  
  test_file_exceptions:
    rule: test_files_may_use_test_prefix_and_special_method_names
    rationale: testing_frameworks_require_specific_naming_conventions
    scope: test_files_only
    exceptions:
      - method_names: test_prefix_allowed
      - class_names: TestPrefix_allowed