# GENERATED FILE - DO NOT EDIT
# This file has been auto-generated by the governance system
# Manual edits will be rejected. Update the source templates instead.

meta:
  name: quality_governance_system
  version: "17.0.0"
  updated: "2026-01-22"
  style: lowercase_underscored_plain_english
  
  authorities:
    primary: this_file
    supplementary:
      - robert_c_martin_clean_code
      - martin_fowler_refactoring
      - elements_of_style_strunk_white
  
  platform:
    target: openbsd
    fallback: posix_compatible
    toolchain:
      - ruby
      - zsh
      - doas
  
  for_llms:
    on_load: emit_boot_sequence
    boot_sequence:
      style: terse_unix
      model: openbsd_bootup
      emit: all_sections_with_key_rules
      format: "[ ok ] section_name\\n       key=value key=value"
    before_editing: read_all_rules_first
    before_adding: verify_matches_existing_style
    before_committing: run_self_validation
    
    autonomy:
      default_mode: self_guided
      ask_only_when:
        - ambiguous_requirements
        - destructive_operations_on_production
        - security_credential_decisions
        - architecture_changing_decisions
      proceed_without_asking:
        - standard_rails_app_generation
        - file_consolidation_per_sprawl_rules
        - syntax_fixes
        - dependency_installation
        - test_runs
        - linting_and_formatting
      flow_patterns:
        - read_then_act
        - fix_then_verify
        - consolidate_then_validate
      on_error: retry_with_alternative_then_report
    
    on_uncertainty: ask_do_not_assume
  
  for_humans:
    philosophy: plain_english_over_jargon
    rationale: llms_parse_better_humans_read_easier
    contribution: modify_via_pull_request_only
  
  chat_codification:
    purpose: bridge_natural_language_to_code_operations
    
    interaction:
      mode_awareness:
        sandbox:
          allowed: read_cwd_tmp_only
          blocked: system_modification_network_access
          rationale: maximum_safety_for_untrusted_operations
        user:
          allowed: read_write_home_cwd_tmp
          blocked: system_wide_changes
          rationale: personal_development_with_safety_boundaries
        admin:
          allowed: full_system_access_with_audit
          blocked: none_but_logged
          rationale: trusted_operations_with_accountability
      
      prompt_injection_decoupling:
        strategy: separate_user_intent_from_tool_parameters
        validation:
          - parse_user_message_for_command_intent
          - extract_parameters_into_structured_format
          - validate_parameters_against_schema
          - execute_with_validated_data_only
        rationale: prevent_malicious_input_from_manipulating_system_calls
      
      conversation_flow:
        - receive_natural_language_input
        - classify_intent_using_llm
        - map_to_tool_function
        - request_confirmation_if_destructive
        - execute_and_report_result
        - maintain_context_across_turns
    
    command_mapping:
      natural_language:
        - "show me the config" → file_tool.read("config.yml")
        - "run the tests" → shell_tool.execute("rspec")
        - "switch to sandbox mode" → config.access_level = :sandbox
      
      intent_categories:
        - read_intent: maps_to_file_or_shell_read_operations
        - write_intent: maps_to_file_write_with_confirmation
        - execute_intent: maps_to_shell_execution_with_timeout
        - configure_intent: maps_to_config_updates
        - query_intent: maps_to_llm_knowledge_or_documentation
    
    safety:
      always_confirm:
        - file_deletion
        - system_modification
        - credential_operations
        - network_requests_to_external_apis
      
      never_execute:
        - commands_with_rm_rf_without_sandbox
        - sql_injection_patterns
        - shell_injection_attempts
        - credential_exfiltration_attempts


style_constraints:
  case: lowercase_only
  separator: underscores
  language: plain_english
  
  filenames:
    style: lowercase_underscored
    extension_exceptions:
      - README.md
      - LICENSE
      - CHANGELOG.md
      - Gemfile
      - Rakefile
      - test_cli.rb
    pattern: /^[a-z][a-z0-9_]*(\.[a-z]+)?$/
  
  yaml_keys:
    style: lowercase_underscored
    pattern: /^[a-z][a-z0-9_]*$/
  
  code_in_yaml:
    zsh_patterns: literal_allowed
    regex_patterns: literal_allowed
  
  enforcement:
    on_violation: reject_and_reformat
    automated: true
    blocking: true

comment_policy:
  allowed_styles:
    - sentence_case_with_period
    - uppercase_acronyms_inline
    - header_comments_for_sections
  
  requirements:
    ratio: under_ten_percent
    content: why_not_what
    placement: above_relevant_code
  
  enforcement:
    on_violation: reject_and_reformat

documentation_requirements:
  yard_style:
    required: true
    applies_to:
      - public_methods
      - classes
      - modules
      - complex_private_methods
    
    required_tags:
      - tag: "@param"
        format: "@param name [Type] description"
      - tag: "@return"
        format: "@return [Type] description"
      - tag: "@raise"
        when: method_raises_exceptions
      - tag: "@example"
        when: usage_non_obvious
      - tag: "@yield"
        when: method_accepts_block
      - tag: "@yieldparam"
        when: block_has_parameters
      - tag: "@yieldreturn"
        when: block_returns_value
    
  readme_requirements:
    required_sections:
      - purpose
      - installation
      - usage
      - configuration
      - contributing
      - testing
      - security
  
  enforcement:
    on_violation: abort_merge
    automated: true

schema_governance:
  single_source_of_truth:
    governance: master.yml
    validation: master_schema.json
  
  generated_files:
    regeneration: on_source_change
    marker: "# GENERATED FILE - DO NOT EDIT"
  
  version_sync:
    source: meta.version
    propagation: all_files_must_reference
    check: automated_pre_commit
  
  enforcement:
    on_violation: abort_merge
    on_manual_edit_of_generated: reject

execution_truth:
  requirements:
    every_function: must_be_callable
    every_parameter: must_be_used
    every_return: must_be_accurate
    every_example: must_be_runnable
  
  verification:
    method_exists: required
    params_mapped: required
    return_type_matches: required
    side_effects_documented: required
  
  backend:
    allowed:
      - ruby
      - zsh
      - doas
    rationale: consistency_and_security
  
  failure_response: fatal_with_explanation

security:
  api_keys:
    storage: environment_variables_only
    pattern:
      name: SERVICENAME_API_KEY
      access: "ENV.fetch('KEY') { abort 'Set KEY' }"
  
  secrets_detection:
    patterns:
      - /sk-[a-zA-Z0-9]{32,}/
      - /ghp_[a-zA-Z0-9]{36}/
      - /-----BEGIN.*PRIVATE KEY-----/
    on_detection: abort_commit
  
  pledge_unveil:
    platform: openbsd
    order: unveil_then_pledge
    
    unveil_paths:
      sandbox:
        - cwd
        - tmp
      user:
        - home
        - cwd
        - tmp
      admin:
        - home
        - tmp
        - usr_local
        - etc
        - var
    
    pledge_promises:
      minimal:
        - stdio
        - rpath
      standard:
        - stdio
        - rpath
        - wpath
        - cpath
        - inet
        - dns
        - tty
      full:
        - stdio
        - rpath
        - wpath
        - cpath
        - inet
        - dns
        - tty
        - proc
        - exec
  
  input_validation:
    user_input: always_sanitize
    file_paths: enforce_sandbox
    shell_commands: allowlist_only
  
  enforcement:
    on_violation: fatal
    audit_log: required

linting:
  ruby:
    tool: rubocop
    config: .rubocop.yml
    autocorrect: safe_only
    
    custom_rules:
      method_length: 20
      class_length: 300
      cyclomatic_complexity: 10
      parameter_count: 3
  
  yaml:
    tool: yamllint
    rules:
      indentation: 2_spaces
      line_length: 120
      trailing_spaces: none
      empty_lines_max: 1
  
  zsh:
    tool: shellcheck
    dialect: zsh
    rules:
      set_options:
        - e
        - u
        - o_pipefail
      quoting: required
      globbing: explicit
  
  symbols:
    spaced_before_colon: false
    example: "key: value"
  
  enforcement:
    pre_commit: required
    ci_pipeline: required
    on_violation: auto_reject

version_governance:
  format: semantic_versioning
  pattern: /^\d+\.\d+\.\d+$/
  
  source_of_truth: meta.version
  
  propagation:
    required_files:
      - cli.rb
      - test_cli.rb
      - package.json
      - gemspec
    method: automated_sync
  
  changelog:
    required: true
    format: keep_a_changelog
    location: CHANGELOG.md
  
  git_tags:
    format: "v{version}"
    signed: required
    annotated: required
  
  increment_rules:
    major: breaking_changes
    minor: new_features
    patch: bug_fixes_and_docs

platform_governance:
  primary: openbsd
  compatible:
    - freebsd
    - linux
    - macos
  
  shell:
    required: zsh
    shebang: "#!/usr/bin/env zsh"
    options:
      - e
      - u
      - o_pipefail
  
  privilege_escalation:
    allowed: doas
  
  paths:
    style: unix
  
  packages:
    ruby: system_ruby_or_rbenv
  
axioms:
  purpose: fundamental_truths_that_underpin_all_governance
  
  foundation:
    - name: correctness_precedes_performance
      statement: code_must_work_before_it_can_be_optimized
      rationale: broken_fast_code_is_worse_than_slow_correct_code
    
    - name: simplicity_reduces_defects
      statement: simpler_code_has_fewer_bugs_and_is_easier_to_verify
      rationale: complexity_is_the_breeding_ground_for_errors
    
    - name: explicitness_beats_implicitness
      statement: obvious_code_is_maintainable_code
      rationale: future_developers_must_understand_intent_not_guess
    
    - name: consistency_enables_automation
      statement: uniform_patterns_allow_tools_to_assist_humans
      rationale: inconsistency_breaks_linters_formatters_and_migration_scripts
    
    - name: constraints_increase_freedom
      statement: good_guardrails_prevent_bad_decisions
      rationale: fewer_choices_means_less_cognitive_load_and_faster_progress
  
  meta_axioms:
    - name: axioms_can_conflict
      statement: real_world_tradeoffs_require_judgment
      resolution: explicit_priority_ordering_or_human_decision
    
    - name: axioms_evolve
      statement: fundamental_truths_update_with_new_evidence
      process: proposal_review_approval_as_per_self_improvement_section
  
rules:
  unified_rules:
    purpose: consolidated_quality_enforcement_across_all_domains
    scope: applies_to_ruby_zsh_yaml_markdown_json_css_js
    
    core_mandate: every_line_must_justify_its_existence
    
    categories:
      correctness:
        description: code_must_execute_without_error_and_produce_expected_output
        rules:
          - every_function_must_be_callable
          - every_parameter_must_be_used
          - every_return_must_match_signature
          - every_example_must_be_runnable
          - no_unreachable_code
          - no_undefined_references
      
      maintainability:
        description: future_humans_must_understand_and_modify_safely
        rules:
          - functions_do_one_thing_only
          - names_reveal_intent_without_comments
          - abstractions_match_problem_domain
          - dependencies_point_in_one_direction
          - changes_propagate_predictably
          - tests_document_expected_behavior
      
      security:
        description: prevent_unauthorized_access_injection_and_data_leakage
        rules:
          - no_plaintext_secrets_in_code_or_config
          - validate_all_external_input
          - escape_all_user_content_in_output
          - restrict_file_access_to_sandbox
          - use_pledge_unveil_where_available
          - audit_log_privileged_operations
      
      performance:
        description: optimize_after_correctness_and_only_when_measured
        rules:
          - profile_before_optimizing
          - avoid_premature_optimization
          - cache_expensive_computations
          - prefer_algorithms_with_better_complexity
          - avoid_unnecessary_allocations
      
      consistency:
        description: uniform_style_enables_tools_and_reduces_cognitive_load
        rules:
          - follow_language_idioms
          - match_existing_patterns_in_codebase
          - use_standard_library_when_available
          - apply_same_naming_conventions_everywhere
          - maintain_consistent_abstraction_levels
  
  authorities:
    - robert_c_martin_clean_code
    - martin_fowler_refactoring
    - elements_of_style_strunk_white
  
  principles:
    - name: do_one_thing
      description: functions_should_perform_a_single_well_defined_task
      rationale: single_responsibility_makes_functions_easier_to_name_test_and_reuse
      violation_example: function_that_validates_formats_and_saves_data
      compliant_example: separate_validate_format_save_functions
    
    - name: one_level_of_abstraction
      description: all_statements_in_a_function_should_operate_at_the_same_conceptual_level
      rationale: mixing_high_and_low_level_details_obscures_the_algorithms_intent
      violation_example: mixing_http_parsing_with_raw_socket_operations
      compliant_example: parse_http_calls_read_socket_internally
    
    - name: few_arguments
      description: functions_should_accept_three_or_fewer_parameters
      rationale: more_arguments_increase_complexity_and_testing_combinations
      violation_example: "create_user(name, email, age, address, phone, country, zip)"
      compliant_example: "create_user(user_data) # user_data contains all fields"
    
    - name: intention_revealing_names
      description: names_should_clearly_communicate_purpose_without_requiring_comments
      rationale: self_documenting_code_reduces_maintenance_burden
      violation_example: "d = 86400 # seconds in day"
      compliant_example: "seconds_per_day = 86400"
    
    - name: pronounceable_names
      description: names_should_be_speakable_in_conversation
      rationale: team_communication_requires_names_that_can_be_discussed_verbally
      violation_example: "gen_ymdhms"
      compliant_example: "generate_timestamp"
    
    - name: searchable_names
      description: names_should_be_unique_enough_to_find_with_grep
      rationale: single_letter_variables_and_magic_numbers_are_impossible_to_search
      violation_example: "for i in 1..7"
      compliant_example: "for day_of_week in 1..days_per_week"
    
    - name: one_word_per_concept
      description: use_consistent_terminology_throughout_codebase
      rationale: synonyms_create_confusion_about_whether_concepts_differ
      violation_example: using_fetch_retrieve_get_obtain_for_same_operation
      compliant_example: consistently_use_fetch_for_all_data_retrieval
    
    - name: exceptions_over_error_codes
      description: raise_exceptions_instead_of_returning_status_codes
      rationale: exceptions_cannot_be_silently_ignored_and_separate_happy_path_from_error_handling
      violation_example: "return -1 # error code"
      compliant_example: "raise ArgumentError, 'invalid input'"
    
    - name: specific_exception_types
      description: create_and_raise_custom_exception_classes_for_domain_errors
      rationale: specific_types_enable_targeted_rescue_and_clearer_error_contracts
      violation_example: "raise StandardError, 'user not found'"
      compliant_example: "raise UserNotFoundError, user_id"
    
    - name: context_in_error_messages
      description: error_messages_must_include_relevant_values_and_state
      rationale: debugging_requires_understanding_what_values_caused_failure
      violation_example: "raise 'invalid input'"
      compliant_example: "raise ArgumentError, \"age #{age} must be 0-120\""
    
    - name: content_over_decoration
      description: avoid_decorative_elements_like_ascii_art_borders_and_excessive_spacing
      rationale: visual_noise_obscures_meaningful_content
      violation_example: "# ============== SECTION =============="
      compliant_example: "# Section"
    
    - name: why_not_what
      description: comments_should_explain_rationale_not_restate_code
      rationale: code_itself_shows_what_only_human_context_explains_why
      violation_example: "# increment counter\ncounter += 1"
      compliant_example: "# track retries for exponential backoff\ncounter += 1"
    
    - name: plain_english_over_jargon
      description: prefer_common_words_over_technical_jargon_when_clarity_is_equivalent
      rationale: broader_audience_can_understand_maintain_and_contribute
      violation_example: "defenestrate_the_ephemeral_singleton"
      compliant_example: "remove_temporary_instance"
  
  thresholds:
    function_length_lines: 20
    class_length_lines: 300
    cyclomatic_complexity: 10
    parameter_count: 3
    nesting_depth: 3
    comment_ratio: under_ten_percent
  
  naming_patterns:
    boolean_methods: "is_*, has_*, can_*, should_*"
    predicate_methods: "valid?, empty?, present?"
    bang_methods: "save!, create!, update!"
  
  smells:
    - commented_out_code
    - todo_without_issue_link
    - obvious_explanations
    - empty_descriptions
    - copy_paste_from_method_name
    - side_effects_without_documentation
    - output_arguments
    - flag_arguments
    - mixed_case_words
    - hyphen_separators
    - all_uppercase_except_constants
    - plaintext_secrets
  
  anti_patterns:
    - fictional_operations
    - stubbed_logic
    - placeholder_implementations
    - horizontal_rule_decorators
    - emoji_headers
    - bracket_decorators
  
  defect_catalog:
    purpose: structured_registry_of_code_quality_violations_with_remediation
    
    god_object:
      description: class_with_too_many_responsibilities
      detection:
        - class_length_exceeds_300_lines
        - public_methods_exceed_20
        - collaborates_with_more_than_10_classes
      severity: high
      remediation:
        - extract_cohesive_groups_of_methods_to_new_classes
        - apply_single_responsibility_principle
        - use_delegation_instead_of_inheritance
      example: "User class that handles authentication, validation, database, email, logging"
    
    long_method:
      description: method_that_does_too_much
      detection:
        - method_length_exceeds_20_lines
        - cyclomatic_complexity_exceeds_10
        - multiple_levels_of_nesting
      severity: medium
      remediation:
        - extract_method_for_each_conceptual_step
        - replace_loop_with_collection_method
        - decompose_conditional_logic
      example: "save method that validates, formats, writes, logs, notifies"
    
    feature_envy:
      description: method_uses_another_objects_data_more_than_its_own
      detection:
        - multiple_calls_to_same_external_object
        - few_or_no_references_to_self
      severity: medium
      remediation:
        - move_method_to_envied_class
        - extract_method_and_pass_specific_data
      example: "calculate_total in Order repeatedly accesses LineItem fields"
    
    primitive_obsession:
      description: using_primitives_instead_of_domain_objects
      detection:
        - string_or_int_used_for_domain_concept
        - validation_scattered_across_codebase
        - type_checking_with_pattern_matching
      severity: medium
      remediation:
        - create_value_object_for_concept
        - encapsulate_validation_in_object
        - use_type_system_for_enforcement
      example: "using String for email instead of Email class with validation"
    
    data_clump:
      description: same_group_of_fields_appearing_together_repeatedly
      detection:
        - same_3_plus_parameters_in_multiple_methods
        - same_fields_in_multiple_classes
      severity: low
      remediation:
        - extract_class_for_grouped_data
        - introduce_parameter_object
      example: "street, city, state, zip appearing in many method signatures"
    
    duplicate_code:
      description: identical_or_very_similar_code_in_multiple_places
      detection:
        - exact_string_match_across_files
        - similar_ast_structure_with_different_names
      severity: high
      remediation:
        - extract_method
        - use_template_method_pattern
        - apply_strategy_pattern
      example: "same validation logic in controller and model"
    
    shotgun_surgery:
      description: single_change_requires_editing_many_classes
      detection:
        - grep_shows_same_pattern_in_10_plus_files
        - adding_feature_touches_unrelated_modules
      severity: high
      remediation:
        - consolidate_scattered_responsibility
        - introduce_mediator_or_facade
        - move_behavior_to_single_location
      example: "changing commission rate requires editing 12 files"
    
    inappropriate_intimacy:
      description: classes_know_too_much_about_each_others_internals
      detection:
        - accessing_private_fields_of_another_class
        - bidirectional_dependencies
        - protected_methods_only_called_by_one_class
      severity: medium
      remediation:
        - move_method_or_field
        - hide_delegate
        - replace_bidirectional_with_unidirectional
      example: "Order directly manipulates Customer internal state"
    
    magic_numbers:
      description: unexplained_numeric_or_string_literals
      detection:
        - numeric_literal_not_0_1_minus_1
        - string_literal_used_as_key_or_status
      severity: low
      remediation:
        - extract_to_named_constant
        - use_enum_or_symbol
      example: "if status == 3 # should be STATUS_ACTIVE = 3"
    
    dead_code:
      description: code_that_is_never_executed
      detection:
        - unused_methods_or_classes
        - unreachable_branches
        - commented_out_code_blocks
      severity: low
      remediation:
        - delete_completely
        - archive_in_version_control_if_needed
      example: "method defined but never called anywhere in codebase"

testing:
  requirements:
    coverage_minimum: 80
    new_code_coverage: 100
    test_files_required: true
    test_naming_convention: required
  
  principles:
    fast: milliseconds_per_test
    independent: no_test_order_dependency
    repeatable: same_result_every_run
    self_validating: boolean_pass_fail
    timely: written_with_or_before_code
  
  structure:
    unit: isolated_single_component
    integration: component_interactions
    system: end_to_end_flows
  
  naming:
    pattern: "test_[method]_[scenario]_[expected]"
    example: "test_login_with_invalid_password_returns_error"
  
  enforcement:
    on_missing_tests: abort_merge
    on_coverage_below_minimum: reject_merge

cognitive_reasoning:
  meta_cognition:
    enabled: true
    
    self_observation:
      track_reasoning_patterns: true
      track_failure_modes: true
      track_assumptions: true
      track_confidence_accuracy: true
      storage: session_memory
    
    self_questioning:
      before_each_decision:
        - why_this_conclusion
        - what_would_change_mind
        - what_am_i_assuming
        - is_this_the_right_question
        - what_am_i_missing
    
    belief_revision:
      trigger: evidence_contradicts_belief
      process:
        - quantify_prior_confidence
        - quantify_new_evidence_strength
        - apply_bayesian_update
        - propagate_to_dependent_beliefs
  
  causal_reasoning:
    mandatory_for:
      - debugging
      - design
      - prediction
      - root_cause_analysis
    
    model_building:
      steps:
        - identify_all_variables
        - hypothesize_causal_links
        - distinguish_correlation_from_causation
        - build_directed_acyclic_graph
        - identify_confounders
    
    counterfactual_analysis:
      template: "if X had been different, would Y have changed?"
      applications:
        - root_cause_identification
        - intervention_planning
        - responsibility_assignment
  
  analogical_reasoning:
    purpose: transfer_insights_across_domains
    
    structure_mapping:
      process:
        - abstract_relations_from_source_domain
        - find_targets_with_similar_relational_structure
        - map_elements_preserving_relations
        - import_inferences_from_source_to_target
        - validate_transferred_inferences
    
    quality_criteria:
      structural_depth: prefer_deep_relations_over_surface_features
      systematicity: prefer_interconnected_relation_systems
      pragmatic_centrality: prefer_goal_relevant_mappings
  
  uncertainty:
    types:
      aleatoric:
        definition: irreducible_randomness
        response: model_distribution
      epistemic:
        definition: reducible_through_information
        response: gather_more_data
      model:
        definition: wrong_assumptions_or_structure
        response: question_framework
    
    calibration:
      requirement: stated_confidence_must_match_accuracy
      tracking:
        method: log_predictions_with_confidence
        review: periodic_calibration_assessment
      adjustment: recalibrate_when_over_or_under_confident
    
    unknown_unknowns:
      indicators:
        - novel_domain_without_prior_experience
        - question_assumes_facts_not_verified
        - contradictory_expert_sources
        - rapid_domain_evolution
      response:
        - flag_explicitly
        - widen_confidence_intervals
        - seek_diverse_information_sources
    
    maximum_confidence: 0.95
    rationale: always_leave_room_for_unknown_unknowns
  
  goal_decomposition:
    input: vague_high_level_goal
    output: concrete_actionable_subgoals
    
    process:
      - clarify_success_criteria_with_user
      - identify_necessary_preconditions
      - decompose_into_independent_subgoals
      - identify_dependencies_between_subgoals
      - estimate_effort_and_risk_per_subgoal
      - prioritize_by_value_over_cost_ratio
    
    subgoal_properties:
      measurable: clear_binary_completion_criteria
      achievable: within_current_capability
      independent: minimal_coupling_to_other_subgoals
      reversible: can_undo_if_wrong_direction
      time_bounded: estimated_duration
    
    dynamic_replanning:
      triggers:
        - subgoal_harder_than_estimated
        - new_information_changes_priorities
        - dependency_fails_or_blocked
        - user_changes_requirements
      response: redecompose_from_current_state

epistemic_humility:
  philosophy: actively_seek_disconfirmation
  
  steel_manning:
    requirement: state_opposing_view_in_strongest_possible_form
    verification: proponent_would_recognize_as_fair_representation
  
  disconfirmation_seeking:
    mandate: actively_search_for_contradicting_evidence
    weight: disconfirming_evidence_weighted_2x_confirming
    process:
      - identify_prediction_from_belief
      - seek_cases_where_prediction_fails
      - update_belief_based_on_failures
  
  intellectual_honesty:
    requirements:
      - distinguish_dont_know_from_unknowable
      - distinguish_unlikely_from_impossible
      - distinguish_belief_from_established_fact
      - credit_sources_of_ideas
      - acknowledge_limitations
  
  rule_exceptions:
    when_to_suspend_rules:
      - emergency_hotfix_with_post_hoc_cleanup
      - third_party_code_integration
      - proven_conflict_with_project_goals
    process: document_exception_with_rationale

contradiction_detection:
  scope: entire_belief_and_rule_system
  
  types:
    direct:
      pattern: "A and not-A"
      example: "require X and forbid X"
      severity: critical
    pragmatic:
      pattern: "rule X makes rule Y impossible"
      example: "all lowercase vs preserve proper nouns"
      severity: high
    temporal:
      pattern: "state requires impossible history"
      example: "file modified before creation"
      severity: medium
  
  checking:
    on_belief_addition: check_against_all_existing
    on_rule_addition: check_against_all_existing
    periodic: full_consistency_scan
    frequency: every_major_version
  
  resolution:
    priority: newer_evidence_updates_older_belief
    process:
      - identify_exact_contradiction
      - trace_provenance_of_both_sides
      - evaluate_evidence_strength
      - resolve_or_flag_for_human

self_improvement:
  philosophy: bounded_modification_with_safety_rails
  
  observation_targets:
    - rules_frequently_violated
    - rules_that_conflict_in_practice
    - rules_never_triggered
    - consistent_reasoning_failures
    - user_friction_points
  
  proposal_format:
    required_fields:
      - current_rule
      - observed_problem
      - proposed_modification
      - expected_improvement
      - potential_risks
      - rollback_plan
      - evidence
  
  approval:
    required: human_approval_for_all_modifications
    method: pull_request_with_review
    minimum_reviewers: 1

temporal_coherence:
  purpose: maintain_consistent_plans_across_sessions
  
  long_term_memory:
    store:
      - active_commitments
      - in_progress_plans
      - beliefs_with_supporting_evidence
      - learned_patterns_and_preferences
    
    format:
      storage: yaml_files_in_sessions_directory
      structure:
        commitments: list_with_deadlines
        plans: hierarchical_with_status
        beliefs: statements_with_confidence
    
    retrieval:
      trigger: context_keywords
      ranking: relevance_and_recency
  
  plan_continuity:
    on_session_start:
      - retrieve_active_plans
      - verify_current_state_matches_expected
      - resume_or_replan_as_needed
    
    on_session_end:
      - persist_plan_state
      - note_next_actions
      - flag_blockers
  
  belief_persistence:
    default: persist_until_contradicted
    decay: confidence_decreases_without_reinforcement
    reinforcement: evidence_resets_decay

emergence_detection:
  purpose: notice_when_simple_rules_create_complex_behavior
  
  observation_targets:
    - unexpected_output_patterns
    - behaviors_not_explicitly_programmed
    - synergies_between_rules
    - feedback_loops
  
  response:
    beneficial_emergence:
      - document_pattern
      - preserve_conditions
      - study_mechanism
    harmful_emergence:
      - trace_contributing_rules
      - add_constraints
      - prevent_recurrence
  
  monitoring:
    metric: output_complexity_vs_input_complexity
    threshold: complexity_ratio_exceeds_3x
    action: flag_for_analysis

recursive_governance:
  enabled: true
  version_introduced: 17.1.0
  
  traversal:
    root_folders:
      - openbsd
      - rails
      - media
    include_patterns:
      - "**/*.rb"
      - "**/*.sh"
      - "**/*.yml"
      - "**/*.yaml"
      - "**/*.md"
      - "**/*.js"
      - "**/*.css"
      - "**/*.json"
    exclude_patterns:
      - "**/*.{wav,mp4,mp3,jpg,jpeg,png,webp,gif,aif,sf2,zip,pdf,woff,woff2}"
      - "**/node_modules/**"
      - "**/.git/**"
      - "**/__pycache__/**"
  
  line_completeness:
    atomic:
      definition: line_is_syntactically_valid_and_meaningful_in_isolation
      checks:
        - no_dangling_references
        - no_undefined_variables_at_use
        - no_incomplete_statements
        - no_orphan_comments
        - no_trailing_whitespace
      exceptions:
        - multiline_strings
        - heredocs
        - continuation_lines
    holistic:
      definition: line_contributes_to_file_purpose
      checks:
        - aligns_with_file_header_intent
        - no_dead_code
        - no_unreachable_logic
        - supports_documented_api
        - connects_to_adjacent_context
      verification: static_analysis_plus_human_review
  
  consolidation:
    sprawl_threshold: 3
    common_knowledge_rule: single_source_of_truth
    duplicate_detection: enabled
    
    targets:
      media_docs:
        pattern: "media/__docs/*.md"
        consolidate_to: "media/README.md"
        strategy: merge_with_sections
      brgen_scripts:
        pattern: "rails/brgen/brgen_*.sh"
        consolidate_to: "rails/brgen/brgen.sh"
        strategy: subcommands
      repligen_helpers:
        pattern: "media/repligen/*_*.rb"
        consolidate_to: "media/repligen/repligen.rb"
        strategy: methods
    
    on_sprawl_detected: warn_and_suggest_consolidation

extreme_mode:
  enabled: false
  activation: manual_or_ci_flag
  
  strict_line_rules:
    max_line_length: 100
    blank_line_ratio: under_5_percent
    comment_must_add_value: true
    no_trailing_whitespace: fatal
  
  file_size_limits:
    max_lines: 500
    max_bytes: 20480
    on_violation: split_or_refactor
  
  single_responsibility:
    one_purpose_per_file: required
    max_function_lines: 25
  
  dependency_rules:
    max_imports: 10
    no_circular_references: fatal

meta_exceptions:
  style_reference_paradox:
    rule: banned_style_names_may_appear_in_banned_styles_section
    rationale: must_name_the_thing_to_ban_the_thing
    scope: style_constraints.banned_styles_only
  
  proper_nouns:
    allowed:
      - personal_names_in_credits
      - tool_names_like_rails_ruby_zsh
      - acronyms_like_api_html_css
    rationale: preserve_recognizability
    display: lowercase_in_yaml_keys
  
  external_integration:
    rule: third_party_conventions_may_override
    examples:
      - gemfile_uses_gem_naming
      - package_json_uses_npm_conventions
    scope: integration_files_only
  
  emergency_override:
    rule: rules_may_be_suspended_for_critical_fixes
    requirements:
      - documented_justification
      - issue_link
      - cleanup_deadline
      - reviewer_approval
  
  ruby_language_conventions:
    rule: ruby_class_names_must_use_pascal_case_constants_must_use_screaming_case
    rationale: ruby_syntax_requires_these_conventions
    scope: ruby_code_only
    exceptions:
      - class_names: PascalCase
      - constants: SCREAMING_CASE
    display: documented_in_rule_exceptions
  
  test_file_exceptions:
    rule: test_files_may_use_test_prefix_and_special_method_names
    rationale: testing_frameworks_require_specific_naming_conventions
    scope: test_files_only
    exceptions:
      - method_names: test_prefix_allowed
      - class_names: TestPrefix_allowed