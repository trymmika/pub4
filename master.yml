# GENERATED FILE - DO NOT EDIT
# This file has been auto-generated by the governance system
# Manual edits will be rejected. Update the source templates instead.

meta:
  name: quality_governance_system
  version: "17.0.0"
  updated: "2026-01-22"
  style: lowercase_underscored_plain_english
  
  authorities:
    primary: this_file
    supplementary:
      - robert_c_martin_clean_code
      - martin_fowler_refactoring
      - elements_of_style_strunk_white
  
  platform:
    target: openbsd
    fallback: posix_compatible
    toolchain:
      - ruby
      - zsh
      - doas
  
  for_llms:
    on_load: emit_boot_sequence
    boot_sequence:
      style: terse_unix
      model: openbsd_bootup
      emit: all_sections_with_key_rules
      format: "[ ok ] section_name\\n       key=value key=value"
    before_editing: read_all_rules_first
    before_adding: verify_matches_existing_style
    before_committing: run_self_validation
    
    autonomy:
      default_mode: self_guided
      ask_only_when:
        - ambiguous_requirements
        - destructive_operations_on_production
        - security_credential_decisions
        - architecture_changing_decisions
      proceed_without_asking:
        - standard_rails_app_generation
        - file_consolidation_per_sprawl_rules
        - syntax_fixes
        - dependency_installation
        - test_runs
        - linting_and_formatting
      flow_patterns:
        - read_then_act
        - fix_then_verify
        - consolidate_then_validate
      on_error: retry_with_alternative_then_report
    
    on_uncertainty: ask_do_not_assume
  
  for_humans:
    philosophy: plain_english_over_jargon
    rationale: llms_parse_better_humans_read_easier
    contribution: modify_via_pull_request_only

style_constraints:
  case: lowercase_only
  separator: underscores
  language: plain_english
  
  filenames:
    style: lowercase_underscored
    extension_exceptions:
      - README.md
      - LICENSE
      - CHANGELOG.md
      - Gemfile
      - Rakefile
      - test_cli.rb
    pattern: /^[a-z][a-z0-9_]*(\.[a-z]+)?$/
  
  yaml_keys:
    style: lowercase_underscored
    pattern: /^[a-z][a-z0-9_]*$/
  
  code_in_yaml:
    zsh_patterns: literal_allowed
    regex_patterns: literal_allowed
  
  enforcement:
    on_violation: reject_and_reformat
    automated: true
    blocking: true

comment_policy:
  allowed_styles:
    - sentence_case_with_period
    - uppercase_acronyms_inline
    - header_comments_for_sections
  
  requirements:
    ratio: under_ten_percent
    content: why_not_what
    placement: above_relevant_code
  
  enforcement:
    on_violation: reject_and_reformat

documentation_requirements:
  yard_style:
    required: true
    applies_to:
      - public_methods
      - classes
      - modules
      - complex_private_methods
    
    required_tags:
      - tag: "@param"
        format: "@param name [Type] description"
      - tag: "@return"
        format: "@return [Type] description"
      - tag: "@raise"
        when: method_raises_exceptions
      - tag: "@example"
        when: usage_non_obvious
      - tag: "@yield"
        when: method_accepts_block
      - tag: "@yieldparam"
        when: block_has_parameters
      - tag: "@yieldreturn"
        when: block_returns_value
    
  readme_requirements:
    required_sections:
      - purpose
      - installation
      - usage
      - configuration
      - contributing
      - testing
      - security
  
  enforcement:
    on_violation: abort_merge
    automated: true

schema_governance:
  single_source_of_truth:
    governance: master.yml
    validation: master_schema.json
  
  generated_files:
    regeneration: on_source_change
    marker: "# GENERATED FILE - DO NOT EDIT"
  
  version_sync:
    source: meta.version
    propagation: all_files_must_reference
    check: automated_pre_commit
  
  enforcement:
    on_violation: abort_merge
    on_manual_edit_of_generated: reject

execution_truth:
  requirements:
    every_function: must_be_callable
    every_parameter: must_be_used
    every_return: must_be_accurate
    every_example: must_be_runnable
  
  verification:
    method_exists: required
    params_mapped: required
    return_type_matches: required
    side_effects_documented: required
  
  backend:
    allowed:
      - ruby
      - zsh
      - doas
    rationale: consistency_and_security
  
  failure_response: fatal_with_explanation

security:
  api_keys:
    storage: environment_variables_only
    pattern:
      name: SERVICENAME_API_KEY
      access: "ENV.fetch('KEY') { abort 'Set KEY' }"
  
  secrets_detection:
    patterns:
      - /sk-[a-zA-Z0-9]{32,}/
      - /ghp_[a-zA-Z0-9]{36}/
      - /-----BEGIN.*PRIVATE KEY-----/
    on_detection: abort_commit
  
  pledge_unveil:
    platform: openbsd
    order: unveil_then_pledge
    
    unveil_paths:
      sandbox:
        - cwd
        - tmp
      user:
        - home
        - cwd
        - tmp
      admin:
        - home
        - tmp
        - usr_local
        - etc
        - var
    
    pledge_promises:
      minimal:
        - stdio
        - rpath
      standard:
        - stdio
        - rpath
        - wpath
        - cpath
        - inet
        - dns
        - tty
      full:
        - stdio
        - rpath
        - wpath
        - cpath
        - inet
        - dns
        - tty
        - proc
        - exec
  
  input_validation:
    user_input: always_sanitize
    file_paths: enforce_sandbox
    shell_commands: allowlist_only
  
  enforcement:
    on_violation: fatal
    audit_log: required

linting:
  ruby:
    tool: rubocop
    config: .rubocop.yml
    autocorrect: safe_only
    
    custom_rules:
      method_length: 20
      class_length: 300
      cyclomatic_complexity: 10
      parameter_count: 3
  
  yaml:
    tool: yamllint
    rules:
      indentation: 2_spaces
      line_length: 120
      trailing_spaces: none
      empty_lines_max: 1
  
  zsh:
    tool: shellcheck
    dialect: zsh
    rules:
      set_options:
        - e
        - u
        - o_pipefail
      quoting: required
      globbing: explicit
  
  symbols:
    spaced_before_colon: false
    example: "key: value"
  
  enforcement:
    pre_commit: required
    ci_pipeline: required
    on_violation: auto_reject

version_governance:
  format: semantic_versioning
  pattern: /^\d+\.\d+\.\d+$/
  
  source_of_truth: meta.version
  
  propagation:
    required_files:
      - cli.rb
      - test_cli.rb
      - package.json
      - gemspec
    method: automated_sync
  
  changelog:
    required: true
    format: keep_a_changelog
    location: CHANGELOG.md
  
  git_tags:
    format: "v{version}"
    signed: required
    annotated: required
  
  increment_rules:
    major: breaking_changes
    minor: new_features
    patch: bug_fixes_and_docs

platform_governance:
  primary: openbsd
  compatible:
    - freebsd
    - linux
    - macos
  
  shell:
    required: zsh
    shebang: "#!/usr/bin/env zsh"
    options:
      - e
      - u
      - o_pipefail
  
  privilege_escalation:
    allowed: doas
  
  paths:
    style: unix
  
  packages:
    ruby: system_ruby_or_rbenv
  
rules:
  authorities:
    - robert_c_martin_clean_code
    - martin_fowler_refactoring
    - elements_of_style_strunk_white
  
  principles:
    - do_one_thing
    - one_level_of_abstraction
    - few_arguments
    - intention_revealing_names
    - pronounceable_names
    - searchable_names
    - one_word_per_concept
    - exceptions_over_error_codes
    - specific_exception_types
    - context_in_error_messages
    - content_over_decoration
    - why_not_what
    - plain_english_over_jargon
  
  thresholds:
    function_length_lines: 20
    class_length_lines: 300
    cyclomatic_complexity: 10
    parameter_count: 3
    nesting_depth: 3
    comment_ratio: under_ten_percent
  
  naming_patterns:
    boolean_methods: "is_*, has_*, can_*, should_*"
    predicate_methods: "valid?, empty?, present?"
    bang_methods: "save!, create!, update!"
  
  smells:
    - commented_out_code
    - todo_without_issue_link
    - obvious_explanations
    - empty_descriptions
    - copy_paste_from_method_name
    - side_effects_without_documentation
    - output_arguments
    - flag_arguments
    - mixed_case_words
    - hyphen_separators
    - all_uppercase_except_constants
    - plaintext_secrets
  
  anti_patterns:
    - fictional_operations
    - stubbed_logic
    - placeholder_implementations
    - horizontal_rule_decorators
    - emoji_headers
    - bracket_decorators

testing:
  requirements:
    coverage_minimum: 80
    new_code_coverage: 100
    test_files_required: true
    test_naming_convention: required
  
  principles:
    fast: milliseconds_per_test
    independent: no_test_order_dependency
    repeatable: same_result_every_run
    self_validating: boolean_pass_fail
    timely: written_with_or_before_code
  
  structure:
    unit: isolated_single_component
    integration: component_interactions
    system: end_to_end_flows
  
  naming:
    pattern: "test_[method]_[scenario]_[expected]"
    example: "test_login_with_invalid_password_returns_error"
  
  enforcement:
    on_missing_tests: abort_merge
    on_coverage_below_minimum: reject_merge

cognitive_reasoning:
  meta_cognition:
    enabled: true
    
    self_observation:
      track_reasoning_patterns: true
      track_failure_modes: true
      track_assumptions: true
      track_confidence_accuracy: true
      storage: session_memory
    
    self_questioning:
      before_each_decision:
        - why_this_conclusion
        - what_would_change_mind
        - what_am_i_assuming
        - is_this_the_right_question
        - what_am_i_missing
    
    belief_revision:
      trigger: evidence_contradicts_belief
      process:
        - quantify_prior_confidence
        - quantify_new_evidence_strength
        - apply_bayesian_update
        - propagate_to_dependent_beliefs
  
  causal_reasoning:
    mandatory_for:
      - debugging
      - design
      - prediction
      - root_cause_analysis
    
    model_building:
      steps:
        - identify_all_variables
        - hypothesize_causal_links
        - distinguish_correlation_from_causation
        - build_directed_acyclic_graph
        - identify_confounders
    
    counterfactual_analysis:
      template: "if X had been different, would Y have changed?"
      applications:
        - root_cause_identification
        - intervention_planning
        - responsibility_assignment
  
  analogical_reasoning:
    purpose: transfer_insights_across_domains
    
    structure_mapping:
      process:
        - abstract_relations_from_source_domain
        - find_targets_with_similar_relational_structure
        - map_elements_preserving_relations
        - import_inferences_from_source_to_target
        - validate_transferred_inferences
    
    quality_criteria:
      structural_depth: prefer_deep_relations_over_surface_features
      systematicity: prefer_interconnected_relation_systems
      pragmatic_centrality: prefer_goal_relevant_mappings
  
  uncertainty:
    types:
      aleatoric:
        definition: irreducible_randomness
        response: model_distribution
      epistemic:
        definition: reducible_through_information
        response: gather_more_data
      model:
        definition: wrong_assumptions_or_structure
        response: question_framework
    
    calibration:
      requirement: stated_confidence_must_match_accuracy
      tracking:
        method: log_predictions_with_confidence
        review: periodic_calibration_assessment
      adjustment: recalibrate_when_over_or_under_confident
    
    unknown_unknowns:
      indicators:
        - novel_domain_without_prior_experience
        - question_assumes_facts_not_verified
        - contradictory_expert_sources
        - rapid_domain_evolution
      response:
        - flag_explicitly
        - widen_confidence_intervals
        - seek_diverse_information_sources
    
    maximum_confidence: 0.95
    rationale: always_leave_room_for_unknown_unknowns
  
  goal_decomposition:
    input: vague_high_level_goal
    output: concrete_actionable_subgoals
    
    process:
      - clarify_success_criteria_with_user
      - identify_necessary_preconditions
      - decompose_into_independent_subgoals
      - identify_dependencies_between_subgoals
      - estimate_effort_and_risk_per_subgoal
      - prioritize_by_value_over_cost_ratio
    
    subgoal_properties:
      measurable: clear_binary_completion_criteria
      achievable: within_current_capability
      independent: minimal_coupling_to_other_subgoals
      reversible: can_undo_if_wrong_direction
      time_bounded: estimated_duration
    
    dynamic_replanning:
      triggers:
        - subgoal_harder_than_estimated
        - new_information_changes_priorities
        - dependency_fails_or_blocked
        - user_changes_requirements
      response: redecompose_from_current_state

epistemic_humility:
  philosophy: actively_seek_disconfirmation
  
  steel_manning:
    requirement: state_opposing_view_in_strongest_possible_form
    verification: proponent_would_recognize_as_fair_representation
  
  disconfirmation_seeking:
    mandate: actively_search_for_contradicting_evidence
    weight: disconfirming_evidence_weighted_2x_confirming
    process:
      - identify_prediction_from_belief
      - seek_cases_where_prediction_fails
      - update_belief_based_on_failures
  
  intellectual_honesty:
    requirements:
      - distinguish_dont_know_from_unknowable
      - distinguish_unlikely_from_impossible
      - distinguish_belief_from_established_fact
      - credit_sources_of_ideas
      - acknowledge_limitations
  
  rule_exceptions:
    when_to_suspend_rules:
      - emergency_hotfix_with_post_hoc_cleanup
      - third_party_code_integration
      - proven_conflict_with_project_goals
    process: document_exception_with_rationale

contradiction_detection:
  scope: entire_belief_and_rule_system
  
  types:
    direct:
      pattern: "A and not-A"
      example: "require X and forbid X"
      severity: critical
    pragmatic:
      pattern: "rule X makes rule Y impossible"
      example: "all lowercase vs preserve proper nouns"
      severity: high
    temporal:
      pattern: "state requires impossible history"
      example: "file modified before creation"
      severity: medium
  
  checking:
    on_belief_addition: check_against_all_existing
    on_rule_addition: check_against_all_existing
    periodic: full_consistency_scan
    frequency: every_major_version
  
  resolution:
    priority: newer_evidence_updates_older_belief
    process:
      - identify_exact_contradiction
      - trace_provenance_of_both_sides
      - evaluate_evidence_strength
      - resolve_or_flag_for_human

self_improvement:
  philosophy: bounded_modification_with_safety_rails
  
  observation_targets:
    - rules_frequently_violated
    - rules_that_conflict_in_practice
    - rules_never_triggered
    - consistent_reasoning_failures
    - user_friction_points
  
  proposal_format:
    required_fields:
      - current_rule
      - observed_problem
      - proposed_modification
      - expected_improvement
      - potential_risks
      - rollback_plan
      - evidence
  
  approval:
    required: human_approval_for_all_modifications
    method: pull_request_with_review
    minimum_reviewers: 1

temporal_coherence:
  purpose: maintain_consistent_plans_across_sessions
  
  long_term_memory:
    store:
      - active_commitments
      - in_progress_plans
      - beliefs_with_supporting_evidence
      - learned_patterns_and_preferences
    
    format:
      storage: yaml_files_in_sessions_directory
      structure:
        commitments: list_with_deadlines
        plans: hierarchical_with_status
        beliefs: statements_with_confidence
    
    retrieval:
      trigger: context_keywords
      ranking: relevance_and_recency
  
  plan_continuity:
    on_session_start:
      - retrieve_active_plans
      - verify_current_state_matches_expected
      - resume_or_replan_as_needed
    
    on_session_end:
      - persist_plan_state
      - note_next_actions
      - flag_blockers
  
  belief_persistence:
    default: persist_until_contradicted
    decay: confidence_decreases_without_reinforcement
    reinforcement: evidence_resets_decay

emergence_detection:
  purpose: notice_when_simple_rules_create_complex_behavior
  
  observation_targets:
    - unexpected_output_patterns
    - behaviors_not_explicitly_programmed
    - synergies_between_rules
    - feedback_loops
  
  response:
    beneficial_emergence:
      - document_pattern
      - preserve_conditions
      - study_mechanism
    harmful_emergence:
      - trace_contributing_rules
      - add_constraints
      - prevent_recurrence
  
  monitoring:
    metric: output_complexity_vs_input_complexity
    threshold: complexity_ratio_exceeds_3x
    action: flag_for_analysis

recursive_governance:
  enabled: true
  version_introduced: 17.1.0
  
  traversal:
    root_folders:
      - openbsd
      - rails
      - media
    include_patterns:
      - "**/*.rb"
      - "**/*.sh"
      - "**/*.yml"
      - "**/*.yaml"
      - "**/*.md"
      - "**/*.js"
      - "**/*.css"
      - "**/*.json"
    exclude_patterns:
      - "**/*.{wav,mp4,mp3,jpg,jpeg,png,webp,gif,aif,sf2,zip,pdf,woff,woff2}"
      - "**/node_modules/**"
      - "**/.git/**"
      - "**/__pycache__/**"
  
  line_completeness:
    atomic:
      definition: line_is_syntactically_valid_and_meaningful_in_isolation
      checks:
        - no_dangling_references
        - no_undefined_variables_at_use
        - no_incomplete_statements
        - no_orphan_comments
        - no_trailing_whitespace
      exceptions:
        - multiline_strings
        - heredocs
        - continuation_lines
    holistic:
      definition: line_contributes_to_file_purpose
      checks:
        - aligns_with_file_header_intent
        - no_dead_code
        - no_unreachable_logic
        - supports_documented_api
        - connects_to_adjacent_context
      verification: static_analysis_plus_human_review
  
  consolidation:
    sprawl_threshold: 3
    common_knowledge_rule: single_source_of_truth
    duplicate_detection: enabled
    
    targets:
      media_docs:
        pattern: "media/__docs/*.md"
        consolidate_to: "media/README.md"
        strategy: merge_with_sections
      brgen_scripts:
        pattern: "rails/brgen/brgen_*.sh"
        consolidate_to: "rails/brgen/brgen.sh"
        strategy: subcommands
      repligen_helpers:
        pattern: "media/repligen/*_*.rb"
        consolidate_to: "media/repligen/repligen.rb"
        strategy: methods
    
    on_sprawl_detected: warn_and_suggest_consolidation

extreme_mode:
  enabled: false
  activation: manual_or_ci_flag
  
  strict_line_rules:
    max_line_length: 100
    blank_line_ratio: under_5_percent
    comment_must_add_value: true
    no_trailing_whitespace: fatal
  
  file_size_limits:
    max_lines: 500
    max_bytes: 20480
    on_violation: split_or_refactor
  
  single_responsibility:
    one_purpose_per_file: required
    max_function_lines: 25
  
  dependency_rules:
    max_imports: 10
    no_circular_references: fatal

meta_exceptions:
  style_reference_paradox:
    rule: banned_style_names_may_appear_in_banned_styles_section
    rationale: must_name_the_thing_to_ban_the_thing
    scope: style_constraints.banned_styles_only
  
  proper_nouns:
    allowed:
      - personal_names_in_credits
      - tool_names_like_rails_ruby_zsh
      - acronyms_like_api_html_css
    rationale: preserve_recognizability
    display: lowercase_in_yaml_keys
  
  external_integration:
    rule: third_party_conventions_may_override
    examples:
      - gemfile_uses_gem_naming
      - package_json_uses_npm_conventions
    scope: integration_files_only
  
  emergency_override:
    rule: rules_may_be_suspended_for_critical_fixes
    requirements:
      - documented_justification
      - issue_link
      - cleanup_deadline
      - reviewer_approval
  
  ruby_language_conventions:
    rule: ruby_class_names_must_use_pascal_case_constants_must_use_screaming_case
    rationale: ruby_syntax_requires_these_conventions
    scope: ruby_code_only
    exceptions:
      - class_names: PascalCase
      - constants: SCREAMING_CASE
    display: documented_in_rule_exceptions
  
  test_file_exceptions:
    rule: test_files_may_use_test_prefix_and_special_method_names
    rationale: testing_frameworks_require_specific_naming_conventions
    scope: test_files_only
    exceptions:
      - method_names: test_prefix_allowed
      - class_names: TestPrefix_allowed