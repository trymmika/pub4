# Zsh Native Patterns
# Prefer parameter expansion over forking to awk/sed/grep/tr

version: 1

rationale:
  - No forks: parameter expansion replaces external tools
  - Token efficient: shorter syntax
  - OpenBSD default: native on target platform
  - Rich arrays: better than bash for list processing

string_operations:
  remove_crlf: '${var//$'\''\r'\''/}'
  lowercase: '${(L)var}'
  uppercase: '${(U)var}'
  replace_all: '${var//search/replace}'
  trim_start: '${var##[[:space:]]#}'
  trim_end: '${var%%[[:space:]]#}'
  trim_both: '${${var##[[:space:]]#}%%[[:space:]]#}'
  extract_field: '${${(s:,:)line}[4]}'
  split_to_array: '( ${(s:delim:)var} )'

array_operations:
  filter_matching: '( ${(M)arr:#*pattern*} )'
  filter_excluding: '( ${arr:#*pattern*} )'
  unique: '( ${(u)arr} )'
  join: '${(j:,:)arr}'
  reverse: '( ${(Oa)arr} )'
  sort_asc: '( ${(o)arr} )'
  sort_desc: '( ${(O)arr} )'

file_operations:
  read_file: '$(<file.txt)'
  read_lines: '( ${(f)"$(<file.txt)"} )'
  basename: '${path:t}'
  dirname: '${path:h}'
  extension: '${path:e}'
  without_ext: '${path:r}'

avoid:
  - awk
  - sed
  - tr
  - grep
  - cut
  - head
  - tail
