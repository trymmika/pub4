# Session Recovery Configuration
# Checkpoint system for resuming interrupted work
---
version: 1
recovery:
  enabled: true
  checkpoint_dir: var/checkpoints
  auto_checkpoint: true
  checkpoint_interval: 300  # seconds (5 minutes)
  max_checkpoints: 10  # Keep last 10 checkpoints

checkpoint_format:
  version: 1
  fields:
    - task_description
    - files_completed
    - files_in_progress
    - files_pending
    - files_failed
    - context_decisions
    - context_patterns
    - context_blockers
    - context_variables
    - recovery_instructions
    - timestamp
    - session_id

recovery_strategies:
  file_completion:
    strategy: resume_from_last
    verify: true
    backup: true
    
  failed_operations:
    strategy: skip_and_continue
    log: true
    report: true
    
  context_restoration:
    strategy: full_restore
    include_variables: true
    include_decisions: true

triggers:
  auto_save:
    - event: file_complete
    - event: phase_complete
    - event: error_occurred
    - event: timer_elapsed
      interval: 300
      
  manual_save:
    command: checkpoint
    alias: cp
    
  auto_restore:
    on_startup: prompt  # auto, prompt, never
    max_age: 86400  # 24 hours

persistence:
  format: json
  compression: false
  encryption: false
  
notifications:
  on_checkpoint: false
  on_restore: true
  on_failure: true
  
cleanup:
  auto_cleanup: true
  retain_days: 7
  compress_old: true
