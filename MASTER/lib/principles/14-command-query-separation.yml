---
name: Command-Query Separation
description: Methods should either change state OR return data, never both.
tier: design
priority: 14
auto_fixable: true
anti_patterns:
- name: side_effects_in_queries
  smell: Getter modifies state
  example: "`stack.pop()` returns value AND removes it"
  fix: 'Split: `stack.top()` + `stack.remove()`'
- name: mixed_responsibilities
  smell: Method both computes and persists
  example: "`calculate_total()` that also saves to DB"
  fix: "`total = calculate(); save(total)`"
