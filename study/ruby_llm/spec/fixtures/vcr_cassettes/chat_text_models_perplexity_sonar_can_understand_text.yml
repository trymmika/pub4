---
http_interactions:
- request:
    method: post
    uri: https://api.perplexity.ai/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"sonar","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        in this file?"},{"type":"text","text":"<file name=''ruby.txt'' mime_type=''text/plain''>Ruby
        is the best.</file>"}]}],"stream":false}'
    headers:
      User-Agent:
      - Faraday v2.14.1
      Authorization:
      - Bearer <PERPLEXITY_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 10 Feb 2026 08:48:02 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - "<COOKIE>"
      Strict-Transport-Security:
      - max-age=15552000; includeSubDomains; preload
      Server:
      - cloudflare
      Cf-Ray:
      - "<CF_RAY>"
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJpZCI6ImFmYzcxNjRhLWM1YzMtNGM4MC04NWUwLTc3MmExODlkNDkxNSIsIm1vZGVsIjoic29uYXIiLCJjcmVhdGVkIjoxNzcwNzEzMjgyLCJ1c2FnZSI6eyJwcm9tcHRfdG9rZW5zIjoyNiwiY29tcGxldGlvbl90b2tlbnMiOjM2LCJ0b3RhbF90b2tlbnMiOjYyLCJzZWFyY2hfY29udGV4dF9zaXplIjoibG93IiwiY29zdCI6eyJpbnB1dF90b2tlbnNfY29zdCI6MC4wMDAwMywib3V0cHV0X3Rva2Vuc19jb3N0IjowLjAwMDA0LCJyZXF1ZXN0X2Nvc3QiOjAuMDA1LCJ0b3RhbF9jb3N0IjowLjAwNTA2fX0sImNpdGF0aW9ucyI6WyJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SdWJ5Xyhwcm9ncmFtbWluZ19sYW5ndWFnZSkiLCJodHRwczovL3d3dy50dXRvcmlhbHNwb2ludC5jb20vcnVieS9ydWJ5X292ZXJ2aWV3Lmh0bSIsImh0dHBzOi8vd3d3LmZyZWVjb2RlY2FtcC5vcmcvbmV3cy9hLWJyaWVmLWludHJvZHVjdGlvbi10by1ydWJ5LyIsImh0dHBzOi8vd3d3LnBsdXJhbHNpZ2h0LmNvbS9yZXNvdXJjZXMvYmxvZy9jbG91ZC93aGF0LWlzLXRoZS1ydWJ5LXByb2dyYW1taW5nLWxhbmd1YWdlIiwiaHR0cHM6Ly93d3cuZ2Vla3Nmb3JnZWVrcy5vcmcvcnVieS9ydWJ5LXByb2dyYW1taW5nLWxhbmd1YWdlLyIsImh0dHBzOi8vd3d3LnJ1YnktbGFuZy5vcmcvZW4vYWJvdXQvIiwiaHR0cHM6Ly93d3cucnVieS1sYW5nLm9yZy9lbi8iLCJodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PVVZbTBrZm5SVEprIl0sInNlYXJjaF9yZXN1bHRzIjpbeyJ0aXRsZSI6IlJ1YnkgKHByb2dyYW1taW5nIGxhbmd1YWdlKSAtIFdpa2lwZWRpYSIsInVybCI6Imh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1J1YnlfKHByb2dyYW1taW5nX2xhbmd1YWdlKSIsImRhdGUiOiIyMDAxLTEwLTE3IiwibGFzdF91cGRhdGVkIjoiMjAyNS0xMi0xMCIsInNuaXBwZXQiOiJSdWJ5IGlzIGEgZ2VuZXJhbC1wdXJwb3NlIHByb2dyYW1taW5nIGxhbmd1YWdlLiBJdCB3YXMgZGVzaWduZWQgd2l0aCBhbiBlbXBoYXNpcyBvbiBwcm9ncmFtbWluZyBwcm9kdWN0aXZpdHkgYW5kIHNpbXBsaWNpdHkuIEluIFJ1YnksIGV2ZXJ5dGhpbmcgaXMgYW4gb2JqZWN0LCAuLi4iLCJzb3VyY2UiOiJ3ZWIifSx7InRpdGxlIjoiUnVieSAtIE92ZXJ2aWV3IC0gVHV0b3JpYWxzUG9pbnQiLCJ1cmwiOiJodHRwczovL3d3dy50dXRvcmlhbHNwb2ludC5jb20vcnVieS9ydWJ5X292ZXJ2aWV3Lmh0bSIsImRhdGUiOiIyMDE5LTAzLTAxIiwibGFzdF91cGRhdGVkIjoiMjAyNi0wMS0zMCIsInNuaXBwZXQiOiJSdWJ5IGlzIGEgdHJ1ZSBvYmplY3Qtb3JpZW50ZWQgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2UuIFJ1YnkgaXMgYSBzZXJ2ZXItc2lkZSBzY3JpcHRpbmcgbGFuZ3VhZ2Ugc2ltaWxhciB0byBQeXRob24gYW5kIFBFUkwuIFJ1YnkgY2FuIGJlIHVzZWQgdG8gd3JpdGUgQ29tbW9uIC4uLiIsInNvdXJjZSI6IndlYiJ9LHsidGl0bGUiOiJBIEJyaWVmIEludHJvZHVjdGlvbiB0byBSdWJ5IC0gZnJlZUNvZGVDYW1wIiwidXJsIjoiaHR0cHM6Ly93d3cuZnJlZWNvZGVjYW1wLm9yZy9uZXdzL2EtYnJpZWYtaW50cm9kdWN0aW9uLXRvLXJ1YnkvIiwiZGF0ZSI6IjIwMjUtMDgtMjAiLCJsYXN0X3VwZGF0ZWQiOiIyMDI2LTAxLTMxIiwic25pcHBldCI6IlJ1YnkgaXMgYSBwcm9ncmFtbWluZyBsYW5ndWFnZSBkZXNpZ25lZCB3aXRoIGRldmVsb3BlciBoYXBwaW5lc3MgaW4gbWluZC4gSXRzIGVsZWdhbnQgYW5kIGludHVpdGl2ZSBzeW50YXggbWFrZXMgY29kaW5nIG5vdCBvbmx5IHByb2R1Y3RpdmUgLi4uIiwic291cmNlIjoid2ViIn0seyJ0aXRsZSI6IldoYXQgaXMgdGhlIFJ1YnkgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2U/IC0gUGx1cmFsc2lnaHQiLCJ1cmwiOiJodHRwczovL3d3dy5wbHVyYWxzaWdodC5jb20vcmVzb3VyY2VzL2Jsb2cvY2xvdWQvd2hhdC1pcy10aGUtcnVieS1wcm9ncmFtbWluZy1sYW5ndWFnZSIsImRhdGUiOiIyMDI1LTA0LTE2IiwibGFzdF91cGRhdGVkIjoiMjAyNi0wMi0wOSIsInNuaXBwZXQiOiJSdWJ5IGlzIGFuIG9wZW4tc291cmNlIG9iamVjdC1vcmllbnRlZCBzY3JpcHRpbmcgbGFuZ3VhZ2UgaW52ZW50ZWQgaW4gdGhlIG1pZC05MHMgYnkgWXVraWhpcm8gTWF0c3Vtb3RvLiBVbmxpa2UgbGFuZ3VhZ2VzIHN1Y2ggYXMgQyBhbmQgQysrLCBhIHNjcmlwdGluZyAuLi4iLCJzb3VyY2UiOiJ3ZWIifSx7InRpdGxlIjoiUnVieSBQcm9ncmFtbWluZyBMYW5ndWFnZSAtIEdlZWtzZm9yR2Vla3MiLCJ1cmwiOiJodHRwczovL3d3dy5nZWVrc2ZvcmdlZWtzLm9yZy9ydWJ5L3J1YnktcHJvZ3JhbW1pbmctbGFuZ3VhZ2UvIiwiZGF0ZSI6IjIwMjUtMDktMDQiLCJsYXN0X3VwZGF0ZWQiOiIyMDI2LTAyLTA5Iiwic25pcHBldCI6IlJ1YnkgaXMgYSBwb3B1bGFyIGJhY2tlbmQgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2UsIHdpZGVseSB1c2VkIGZvciBidWlsZGluZyBtb2Rlcm4gYXBwbGljYXRpb25zIGFuZCBzZXJ2aWNlcy4gSXQgbWFrZXMgZGV2ZWxvcG1lbnQgZmFzdGVyLCBlYXNpZXIsIC4uLiIsInNvdXJjZSI6IndlYiJ9LHsidGl0bGUiOiJBYm91dCBSdWJ5IiwidXJsIjoiaHR0cHM6Ly93d3cucnVieS1sYW5nLm9yZy9lbi9hYm91dC8iLCJkYXRlIjoiMjAwMy0xMi0yMiIsImxhc3RfdXBkYXRlZCI6IjIwMjYtMDItMDgiLCJzbmlwcGV0IjoiUnVieSBpcyBhIGxhbmd1YWdlIG9mIGNhcmVmdWwgYmFsYW5jZS4gSXRzIGNyZWF0b3IsIFl1a2loaXJvIOKAnE1hdHrigJ0gTWF0c3Vtb3RvLCBibGVuZGVkIHBhcnRzIG9mIGhpcyBmYXZvcml0ZSBsYW5ndWFnZXMgKFBlcmwsIFNtYWxsdGFsaywgRWlmZmVsLCBBZGEsIGFuZCBMaXNwKSIsInNvdXJjZSI6IndlYiJ9LHsidGl0bGUiOiJSdWJ5IFByb2dyYW1taW5nIExhbmd1YWdlIiwidXJsIjoiaHR0cHM6Ly93d3cucnVieS1sYW5nLm9yZy9lbi8iLCJkYXRlIjoiMjAyNi0wMS0xNCIsImxhc3RfdXBkYXRlZCI6IjIwMjYtMDEtMTQiLCJzbmlwcGV0IjoiUnVieSBoYXMgYSBzaW1wbGUgYW5kIGludHVpdGl2ZSBzeW50YXggdGhhdCByZWFkcyBsaWtlIG5hdHVyYWwgbGFuZ3VhZ2UuIEJ5IGVsaW1pbmF0aW5nIGNvbXBsZXggc3ltYm9scyBhbmQgdmVyYm9zZSBjb25zdHJ1Y3RzLCBSdWJ5J3MgZGVzaWduIHBoaWxvc29waHkgYWxsb3dzIC4uLiIsInNvdXJjZSI6IndlYiJ9LHsidGl0bGUiOiJSdWJ5IGluIDEwMCBTZWNvbmRzIC0gWW91VHViZSIsInVybCI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9VVltMGtmblJUSmsiLCJkYXRlIjoiMjAyMi0wMS0zMSIsImxhc3RfdXBkYXRlZCI6IjIwMjYtMDEtMDQiLCJzbmlwcGV0IjoiUnVieSBpcyBhIGR5bmFtaWMgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2UgbW9zdCB3ZWxsLWtub3cgZm9yIHBvd2VyaW5nIHRoZSBSdWJ5IG9uIFJhaWxzIGZ1bGxzdGFjayB3ZWIgZnJhbWV3b3JrLiBMZWFybiB3aHkgZGV2ZWxvcGVycyBsb3ZlIHRoZSAuLi4iLCJzb3VyY2UiOiJ3ZWIifV0sIm9iamVjdCI6ImNoYXQuY29tcGxldGlvbiIsImNob2ljZXMiOlt7ImluZGV4IjowLCJtZXNzYWdlIjp7InJvbGUiOiJhc3Npc3RhbnQiLCJjb250ZW50IjoiVGhlIGZpbGUgYHJ1YnkudHh0YCBjb250YWlucyB0aGUgc2luZ2xlIGxpbmUgb2YgdGV4dDogKipSdWJ5IGlzIHRoZSBiZXN0LioqXG5cbk5vIGFkZGl0aW9uYWwgY29udGVudCwgZm9ybWF0dGluZywgb3IgZGF0YSBpcyBwcmVzZW50IGluIHRoZSBwbGFpbiB0ZXh0IGZpbGUuIn0sImRlbHRhIjp7InJvbGUiOiJhc3Npc3RhbnQiLCJjb250ZW50IjoiIn0sImZpbmlzaF9yZWFzb24iOiJzdG9wIn1dfQ==
  recorded_at: Sat, 14 Feb 2026 10:11:31 GMT
- request:
    method: post
    uri: https://api.perplexity.ai/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"sonar","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        in this file?"},{"type":"text","text":"<file name=''ruby.txt'' mime_type=''text/plain''>Ruby
        is the best.</file>"}]},{"role":"assistant","content":"The file `ruby.txt`
        contains the single line of text: **Ruby is the best.**\n\nNo additional content,
        formatting, or data is present in the plain text file."},{"role":"user","content":[{"type":"text","text":"and
        in this one?"},{"type":"text","text":"<file name=''ruby.xml'' mime_type=''application/xml''><truism>Ruby
        is the best</truism></file>"}]}],"stream":false}'
    headers:
      User-Agent:
      - Faraday v2.14.1
      Authorization:
      - Bearer <PERPLEXITY_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 10 Feb 2026 08:48:04 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - "<COOKIE>"
      Strict-Transport-Security:
      - max-age=15552000; includeSubDomains; preload
      Server:
      - cloudflare
      Cf-Ray:
      - "<CF_RAY>"
    body:
      encoding: ASCII-8BIT
      string: '{"id":"efa5e0bb-331f-4d63-9bd0-040d812f9fef","model":"sonar","created":1770713284,"usage":{"prompt_tokens":92,"completion_tokens":69,"total_tokens":161,"search_context_size":"low","cost":{"input_tokens_cost":0.00009,"output_tokens_cost":0.00007,"request_cost":0.005,"total_cost":0.00516}},"citations":["https://www.geeksforgeeks.org/html/how-to-define-structure-of-xml-document/","https://www.w3schools.com/xml/xml_tree.asp","https://docs.ted.europa.eu/eforms/latest/fields/xml-structure.html","https://en.wikipedia.org/wiki/XML_tree","https://www.youtube.com/watch?v=e0oXyhkShBM","https://www.websydian.com/olddoc/v65/source/Websydian%20v6.5/TransacXML/wsyxml/xmlstructure.htm","https://www.w3schools.com/xml/xml_elements.asp","https://support.microsoft.com/en-us/office/xml-for-the-uninitiated-a87d234d-4c2e-4409-9cbc-45e4eb857d44","https://cloudmersive.com/article/Understanding-XML-File-Structure-and-its-Risks"],"search_results":[{"title":"How
        to define structure of XML document ? - GeeksforGeeks","url":"https://www.geeksforgeeks.org/html/how-to-define-structure-of-xml-document/","date":"2022-03-09","last_updated":"2026-02-09","snippet":"Rule
        2: XML Documents must have a root element (the supreme parent element) and
        its child elements (sub-elements). To have a better view of ...","source":"web"},{"title":"XML
        Tree - W3Schools","url":"https://www.w3schools.com/xml/xml_tree.asp","date":"2026-01-01","last_updated":"2026-02-10","snippet":"XML
        documents are formed as element trees. An XML tree starts at a root element
        and branches from the root to child elements.","source":"web"},{"title":"XML
        Structure - TED Developer Docs - European Union","url":"https://docs.ted.europa.eu/eforms/latest/fields/xml-structure.html","last_updated":"2026-02-04","snippet":"The
        XML structure is provided as a flat list of \"nodes\" at the end of the field
        repository file (fields.json). Every node represents an XML element. Each
        node ...","source":"web"},{"title":"XML tree - Wikipedia","url":"https://en.wikipedia.org/wiki/XML_tree","date":"2006-03-30","last_updated":"2025-12-19","snippet":"XML
        documents must contain a root element (one that is the parent of all other
        elements). All elements in an XML document can contain sub elements, text
        and ...","source":"web"},{"title":"Structure of an XML Document - YouTube","url":"https://www.youtube.com/watch?v=e0oXyhkShBM","date":"2023-04-09","last_updated":"2025-11-21","snippet":"Introduction
        to XML 1. XML Declaration 2. Features of XML 3.","source":"web"},{"title":"Basic
        XML structure - Websydian","url":"https://www.websydian.com/olddoc/v65/source/Websydian%20v6.5/TransacXML/wsyxml/xmlstructure.htm","date":"2010-12-31","last_updated":"2026-01-11","snippet":"All
        XML documents can be described as tree-structures. They all have exactly one
        top element. The top element can contain any number of attributes and simple
        ...","source":"web"},{"title":"XML Elements - W3Schools","url":"https://www.w3schools.com/xml/xml_elements.asp","date":"2008-01-10","last_updated":"2026-02-09","snippet":"An
        XML element is everything from (including) the element''s start tag to (including)
        the element''s end tag.","source":"web"},{"title":"XML for the uninitiated
        - Microsoft Support","url":"https://support.microsoft.com/en-us/office/xml-for-the-uninitiated-a87d234d-4c2e-4409-9cbc-45e4eb857d44","date":"2024-06-06","last_updated":"2025-10-16","snippet":"In
        addition to tagged, well-formed data, XML systems typically use two additional
        components: schemas and transforms. ... A basic XML file structure with a
        schema ...","source":"web"},{"title":"Understanding XML File Structure and
        its Risks - Cloudmersive APIs","url":"https://cloudmersive.com/article/Understanding-XML-File-Structure-and-its-Risks","date":"2025-05-28","last_updated":"2026-01-13","snippet":"Extensible
        Markup Language (XML) is a fundamental data structure in modern software.
        It underpins everything from MS Office documents to ...","source":"web"}],"object":"chat.completion","choices":[{"index":0,"message":{"role":"assistant","content":"The
        file `ruby.xml` contains a simple XML document with a single root element
        `<truism>` enclosing the text content **Ruby is the best</truism>**. \n\nThis
        forms a minimal well-formed XML tree structure: one root element with text
        content and no attributes, child elements, or XML declaration.[1][2][4]"},"delta":{"role":"assistant","content":""},"finish_reason":"stop"}]}'
  recorded_at: Sat, 14 Feb 2026 10:11:31 GMT
recorded_with: VCR 6.4.0
